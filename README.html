<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Fsdb - a flat-text database for shell scripting</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<!--

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#what_s_new">WHAT'S NEW</a></li>
	<ul>

		<li><a href="#2_32__2012_12_21">2.32, 2012-12-21</a></li>
	</ul>

	<li><a href="#readme_contents">README CONTENTS</a></li>
	<li><a href="#installation">INSTALLATION</a></li>
	<li><a href="#basic_data_format">BASIC DATA FORMAT</a></li>
	<li><a href="#basic_data_manipulation">BASIC DATA MANIPULATION</a></li>
	<li><a href="#talking_about_columns">TALKING ABOUT COLUMNS</a></li>
	<li><a href="#list_of_commands">LIST OF COMMANDS</a></li>
	<ul>

		<li><a href="#table_creation">TABLE CREATION</a></li>
		<li><a href="#table_manipulation">TABLE MANIPULATION</a></li>
		<li><a href="#computation_and_statistics">COMPUTATION AND STATISTICS</a></li>
		<li><a href="#output_control">OUTPUT CONTROL</a></li>
		<li><a href="#conversions">CONVERSIONS</a></li>
		<li><a href="#standard_options">STANDARD OPTIONS</a></li>
	</ul>

	<li><a href="#another_example">ANOTHER EXAMPLE</a></li>
	<li><a href="#a_gradebook_example">A GRADEBOOK EXAMPLE</a></li>
	<li><a href="#a_password_example">A PASSWORD EXAMPLE</a></li>
	<li><a href="#short_examples">SHORT EXAMPLES</a></li>
	<li><a href="#warnings">WARNINGS</a></li>
	<li><a href="#history">HISTORY</a></li>
	<ul>

		<li><a href="#fsdb_2_0_rationale">Fsdb 2.0 Rationale</a></li>
		<li><a href="#contributors">Contributors</a></li>
	</ul>

	<li><a href="#related_work">RELATED WORK</a></li>
	<li><a href="#release_notes">RELEASE NOTES</a></li>
	<ul>

		<li><a href="#0_0_1991">0.0 1991</a></li>
		<li><a href="#0_1_26_may_94">0.1 26-May-94</a></li>
		<li><a href="#0_2_15_mar_95">0.2 15-Mar-95</a></li>
		<li><a href="#1_0__22_jul_97">1.0, 22-Jul-97</a></li>
		<li><a href="#1_1__20_jan_98">1.1, 20-Jan-98</a></li>
		<li><a href="#1_2__11_feb_98">1.2, 11-Feb-98</a></li>
		<li><a href="#1_3__17_mar_98">1.3, 17-Mar-98</a></li>
		<li><a href="#1_4__27_mar_98">1.4, 27-Mar-98</a></li>
		<li><a href="#1_5__25_jun_98">1.5, 25-Jun-98</a></li>
		<li><a href="#1_6__24_may_99">1.6, 24-May-99</a></li>
		<li><a href="#1_7__5_jan_00">1.7,  5-Jan-00</a></li>
		<li><a href="#1_8__28_jun_00">1.8, 28-Jun-00</a></li>
		<li><a href="#1_9__6_nov_00">1.9,  6-Nov-00</a></li>
		<li><a href="#1_10__10_apr_01">1.10, 10-Apr-01</a></li>
		<li><a href="#1_11__2_nov_01">1.11,  2-Nov-01</a></li>
		<li><a href="#1_12__30_oct_02">1.12,  30-Oct-02</a></li>
		<li><a href="#1_13__4_feb_04">1.13,  4-Feb-04</a></li>
		<li><a href="#1_14__24_aug_06">1.14,  24-Aug-06</a></li>
		<li><a href="#1_15__12_nov_07">1.15, 12-Nov-07</a></li>
		<li><a href="#2_0__25_jan_08">2.0, 25-Jan-08</a></li>
		<li><a href="#2_1__6_apr_08">2.1,  6-Apr-08</a></li>
		<li><a href="#2_2__23_may_08">2.2, 23-May-08</a></li>
		<li><a href="#2_3__27_may_08__alpha_">2.3, 27-May-08 (alpha)</a></li>
		<li><a href="#2_4__18_jun_08">2.4, 18-Jun-08</a></li>
		<li><a href="#2_5__24_jun_08">2.5, 24-Jun-08</a></li>
		<li><a href="#2_6__11_jul_08">2.6, 11-Jul-08</a></li>
		<li><a href="#2_8__5_aug_08">2.8,  5-Aug-08</a></li>
		<li><a href="#2_9__6_aug_08">2.9, 6-Aug-08</a></li>
		<li><a href="#2_10__23_sep_08">2.10, 23-Sep-08</a></li>
		<li><a href="#2_11__14_oct_08">2.11, 14-Oct-08</a></li>
		<li><a href="#2_12__16_oct_08">2.12, 16-Oct-08</a></li>
		<li><a href="#2_13__30_oct_08">2.13, 30-Oct-08</a></li>
		<li><a href="#2_14__26_nov_08">2.14, 26-Nov-08</a></li>
		<li><a href="#2_15__13_apr_09">2.15, 13-Apr-09</a></li>
		<li><a href="#2_16__14_apr_09">2.16, 14-Apr-09</a></li>
		<li><a href="#2_17__25_jun_09">2.17, 25-Jun-09</a></li>
		<li><a href="#2_18__1_jul_09_a_minor_release">2.18,  1-Jul-09  A minor release</a></li>
		<li><a href="#2_19__10_jul_09">2.19,  10-Jul-09</a></li>
		<li><a href="#2_20__30_nov_09">2.20, 30-Nov-09</a></li>
		<li><a href="#2_21__17_apr_10">2.21, 17-Apr-10</a></li>
		<li><a href="#2_22__2010_10_31">2.22, 2010-10-31</a></li>
		<li><a href="#2_23__2011_03_10">2.23, 2011-03-10</a></li>
		<li><a href="#2_24__2011_04_15">2.24, 2011-04-15</a></li>
		<li><a href="#2_25__2011_08_07">2.25, 2011-08-07</a></li>
		<li><a href="#2_26__2011_12_12">2.26, 2011-12-12</a></li>
		<li><a href="#2_27__2012_11_15">2.27, 2012-11-15</a></li>
		<li><a href="#2_28__2012_11_15">2.28, 2012-11-15</a></li>
		<li><a href="#2_29__2012_11_20">2.29, 2012-11-20</a></li>
		<li><a href="#2_30__2012_11_25">2.30, 2012-11-25</a></li>
		<li><a href="#2_31__2012_11_28">2.31, 2012-11-28</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#comments_and_bug_reports">COMMENTS and BUG REPORTS</a></li>
</ul>

-->


</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Fsdb - a flat-text database for shell scripting</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Fsdb, the flatfile streaming database is package of commands
for manipulating flat-ASCII databases from
shell scripts.  Fsdb is useful to process medium amounts of data (with
very little data you'd do it by hand, with megabytes you might want a
real database).
Fsdb was known as as Jdb from 1991 to Oct. 2008.</p>
<p>Fsdb is very good at doing things like:</p>
<ul>
<li>
<p>extracting measurements from experimental output</p>
</li>
<li>
<p>examining data to address different hypotheses</p>
</li>
<li>
<p>joining data from different experiments</p>
</li>
<li>
<p>eliminating/detecting outliers</p>
</li>
<li>
<p>computing statistics on data
(mean, confidence intervals, correlations, histograms)</p>
</li>
<li>
<p>reformatting data for graphing programs</p>
</li>
</ul>
<p>Fsdb is built around the idea of a flat text file as a database.
Fsdb files (by convention, with the extension <em class="file">.fsdb</em>),
have a header documenting the schema (what the columns mean),
and then each line represents a database record (or row).</p>
<p>For example:</p>
<pre>
        #fsdb experiment duration
        ufs_mab_sys 37.2
        ufs_mab_sys 37.3
        ufs_rcp_real 264.5
        ufs_rcp_real 277.9</pre>
<p>Is a simple file with four experiments (the rows), 
each with a description, size parameter, and run time
in the first, second, and third columns.</p>
<p>Rather than hand-code scripts to do each special case, Fsdb provides
higher-level functions.  Although it's often easy throw together a
custom script to do any single task, I believe that there are several
advantages to using this library:</p>
<ul>
<li>
<p>these programs provide a higher level interface than plain Perl, so</p>
<ul>
<li>
<p>Fewer lines of simpler code:</p>
<pre>
    dbrow '_experiment eq &quot;ufs_mab_sys&quot;' | dbcolstats duration</pre>
<p>Picks out just one type of experiment and computes statistics on it,
rather than:</p>
<pre>
    while (&lt;&gt;) { split; $sum+=$F[1]; $ss+=$F[1]**2; $n++; }
    $mean = $sum / $n; $std_dev = ...</pre>
<p>in dozens of places.</p>
</li>
</ul>
</li>
<li>
<p>the library uses names for columns, so</p>
<ul>
<li>
<p>No more <code>$F[1]</code>, use <code>_duration</code>.</p>
</li>
<li>
<p>New or different order columns?  No changes to your scripts!</p>
</li>
</ul>
<p>Thus if your experiment gets more complicated with a size parameter,
so your log changes to:</p>
<pre>
        #fsdb experiment size duration
        ufs_mab_sys 1024 37.2
        ufs_mab_sys 1024 37.3
        ufs_rcp_real 1024 264.5
        ufs_rcp_real 1024 277.9
        ufs_mab_sys 2048 45.3
        ufs_mab_sys 2048 44.2</pre>
<p>Then the previous scripts still work, even though duration is
now the third column, not the second.</p>
</li>
<li>
<p>A series of actions are self-documenting (each program records what it does).</p>
<ul>
<li>
<p>No more wondering what hacks were used to compute the
final data, just look at the comments at the end
of the output.</p>
</li>
</ul>
<p>For example, the commands</p>
<pre>
    dbrow '_experiment eq &quot;ufs_mab_sys&quot;' | dbcolstats duration</pre>
<p>add to the end of the output the lines
    #    | dbrow _experiment eq &quot;ufs_mab_sys&quot;
    #    | dbcolstats duration</p>
</li>
<li>
<p>The library is mature, supporting large datasets, 
corner cases, error handling, backed by an automated test suite.</p>
<ul>
<li>
<p>No more puzzling about bad output because your custom script
skimped on error checking.</p>
</li>
<li>
<p>No more memory thrashing when you try to sort ten million records.</p>
</li>
</ul>
</li>
<li>
<p>Fsdb-2.x supports Perl scripting (in addition to shell scripting),
with libraries to do Fsdb input and output, and easy support for pipelines.
The shell script</p>
<pre>
    dbcol name test1 | dbroweval '_test1 += 5;'</pre>
<p>can be written in perl as:</p>
<pre>
    dbpipeline(dbcol(qw(name test1)), dbroweval('_test1 += 5;'));</pre>
</li>
</ul>
<p>(The disadvantage is that you need to learn what functions Fsdb provides.)</p>
<p>Fsdb is built on flat-ASCII databases.  By storing data in simple text
files and processing it with pipelines it is easy to experiment (in
the shell) and look at the output.  
To the best of my knowledge, the original implementation of
this idea was <code>/rdb</code>, a commercial product described in the book
<em>UNIX relational database management: application development in the UNIX environment</em>
by Rod Manis, Evan Schaffer, and Robert Jorgensen (and
also at the web page <a href="http://www.rdb.com/">http://www.rdb.com/</a>).  Fsdb is an incompatible
re-implementation of their idea without any accelerated indexing or
forms support.  (But it's free, and probably has better statistics!).</p>
<p>Fsdb-2.x supports threading and will exploit multiple processors or cores,
and provides Perl-level support for input, output, and threaded-pipelines.</p>
<p>Installation instructions follow at the end of this document. 
Fsdb-2.x requires Perl 5.8 to run.  
All commands have manual pages and provide usage with the <code>--help</code> option.
All commands are backed by an automated test suite.</p>
<p>The most recent version of Fsdb is available on the web at
<a href="http://www.isi.edu/~johnh/SOFTWARE/FSDB/index.html">http://www.isi.edu/~johnh/SOFTWARE/FSDB/index.html</a>.</p>
<p>
</p>
<hr />
<h1><a name="what_s_new">WHAT'S NEW</a></h1>
<p>
</p>
<h2><a name="2_32__2012_12_21_test_suites_should_now_be_more_numerically_robust_">2.32, 2012-12-21
Test suites should now be more numerically robust.</a></h2>
<dl>
<dt><strong><a name="new" class="item">NEW</a></strong></dt>

<dd>
<p>New <a href="#dbfilediff">dbfilediff</a> does fsdb-aware file differencing.
It does not do smart intuition of add/removes like Unix <code>diff(1)</code>,
but it does know about columns, and with <code>-E</code>, it does
numeric-aware differences.</p>
</dd>
<dt><strong><a name="improvement" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Test suites that are numeric now use <a href="#dbfilediff">dbfilediff</a> to do numeric-aware
comparisons, so the test suite should now be robust to slightly different
computers and operating systems and complilers than <em>exactly</em> what I use.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="readme_contents">README CONTENTS</a></h1>
<dl>
<dt><strong><a name="executive_summary" class="item">executive summary</a></strong></dt>

<dt><strong><a name="what_s_new" class="item">what's new</a></strong></dt>

<dt><strong><a name="readme_contents" class="item">README CONTENTS</a></strong></dt>

<dt><strong><a name="installation" class="item">installation</a></strong></dt>

<dt><strong><a name="basic_data_format" class="item">basic data format</a></strong></dt>

<dt><strong><a name="basic_data_manipulation" class="item">basic data manipulation</a></strong></dt>

<dt><strong><a name="list_of_commands" class="item">list of commands</a></strong></dt>

<dt><strong><a name="another_example" class="item">another example</a></strong></dt>

<dt><strong><a name="a_gradebook_example" class="item">a gradebook example</a></strong></dt>

<dt><strong><a name="a_password_example" class="item">a password example</a></strong></dt>

<dt><strong><a name="history" class="item">history</a></strong></dt>

<dt><strong><a name="related_work" class="item">related work</a></strong></dt>

<dt><strong><a name="release_notes" class="item">release notes</a></strong></dt>

<dt><strong><a name="copyright" class="item">copyright</a></strong></dt>

<dt><strong><a name="comments" class="item">comments</a></strong></dt>

</dl>
<p>
</p>
<hr />
<h1><a name="installation">INSTALLATION</a></h1>
<p>Fsdb now uses the standard Perl build and installation from
ExtUtil::MakeMaker(3), so the quick answer to installation is to type:</p>
<pre>

    perl Makefile.PL
    make
    make test
    make install</pre>
<p>Or, if you want to install it somewhere else, change the first line to</p>
<pre>
    perl Makefile.PL PREFIX=$HOME</pre>
<p>and it will go in your home directory's <em class="file">bin</em>, etc.
(See <a href="/ExtUtil/MakeMaker(3).html">the ExtUtil::MakeMaker(3) manpage</a> for more details.)</p>
<p>Fsdb requires perl 5.8 or later and uses ithreads.</p>
<p>A test-suite is available, run it with</p>
<pre>
    make test</pre>
<p>A FreeBSD port to Fsdb is available, see
<a href="http://www.freshports.org/databases/fsdb/">http://www.freshports.org/databases/fsdb/</a>.</p>
<p>A Fink (MacOS X) port is available, see
<a href="http://pdb.finkproject.org/pdb/package.php/fsdb">http://pdb.finkproject.org/pdb/package.php/fsdb</a>.
(Thanks to Lars Eggert for maintaining this port.)</p>
<p>
</p>
<hr />
<h1><a name="basic_data_format">BASIC DATA FORMAT</a></h1>
<p>These programs are based on the idea storing data in simple ASCII
files.  A database is a file with one header line and then data or
comment lines.  For example:</p>
<pre>
        #fsdb account passwd uid gid fullname homedir shell
        johnh * 2274 134 John_Heidemann /home/johnh /bin/bash
        greg * 2275 134 Greg_Johnson /home/greg /bin/bash
        root * 0 0 Root /root /bin/bash
        # this is a simple database</pre>
<p>The header line must be first and begins with <code>#h</code>.
There are rows (records) and columns (fields),
just like in a normal database.
Comment lines begin with <code>#</code>.
Column names are any string not containing spaces or single quote
(although it is prudent to keep them alphanumeric with underscore).</p>
<p>By default, columns are delimited by whitespace.  
With this default configuration, the contents of a field
cannot contain whitespace.
However, this limitation can be relaxed by changing the field separator
as described below.</p>
<p>The big advantage of simple flat-text databases is that 
it is usually easy to massage data into this format,
and it's reasonably easy to take data out of this
format into other (text-based) programs, like gnuplot, jgraph, and
LaTeX.  Think Unix.  Think pipes.
(Or even output to Excel and HTML if you prefer.)</p>
<p>Since no-whitespace in columns was a problem for some applications,
there's an option which relaxes this rule.  You can specify the field
separator in the table header with <code>-F x</code> where <code>x</code> is 
a code for the new field separator.
A full list of codes is at <a href="#dbfilealter">dbfilealter(1)</a>,
but two common special values are <code>-F t</code>
which is a separator of a single tab character,
and <code>-F S</code>, a separator of two spaces.
Both allowing (single) spaces in fields.  An example:</p>
<pre>
        #fsdb -F S account passwd uid gid fullname homedir shell
        johnh  *  2274  134  John Heidemann  /home/johnh  /bin/bash
        greg  *  2275  134  Greg Johnson  /home/greg  /bin/bash
        root  *  0  0  Root  /root  /bin/bash
        # this is a simple database</pre>
<p>See <a href="#dbfilealter">dbfilealter(1)</a> for more details.  Regardless of what the column
separator is for the body of the data, it's always whitespace in the
header.</p>
<p>There's also a third format: a &quot;list&quot;.  Because it's often hard to see
what's columns past the first two, in list format each &quot;column&quot; is on
a separate line.  The programs dblistize and dbcolize convert to and
from this format, and all programs work with either formats.
The command</p>
<pre>
    dbfilealter -R C  &lt; DATA/passwd.fsdb</pre>
<p>outputs:</p>
<pre>
        #fsdb -R C account passwd uid gid fullname homedir shell
        account:  johnh
        passwd:   *
        uid:      2274
        gid:      134
        fullname: John_Heidemann
        homedir:  /home/johnh
        shell:    /bin/bash
        
        account:  greg
        passwd:   *
        uid:      2275
        gid:      134
        fullname: Greg_Johnson
        homedir:  /home/greg
        shell:    /bin/bash
        
        account:  root
        passwd:   *
        uid:      0
        gid:      0
        fullname: Root
        homedir:  /root
        shell:    /bin/bash
        
        # this is a simple database
        #  | dblistize</pre>
<p>See <a href="#dbfilealter">dbfilealter(1)</a> for more details.</p>
<p>
</p>
<hr />
<h1><a name="basic_data_manipulation">BASIC DATA MANIPULATION</a></h1>
<p>A number of programs exist to manipulate databases.
Complex functions can be made by stringing together commands
with shell pipelines.  For example, to print the home
directories of everyone with ``john'' in their names,
you would do:</p>
<pre>
        cat DATA/passwd | dbrow '_fullname =~ /John/' | dbcol homedir</pre>
<p>The output might be:</p>
<pre>
        #fsdb homedir
        /home/johnh
        /home/greg
        # this is a simple database
        #  | dbrow _fullname =~ /John/
        #  | dbcol homedir</pre>
<p>(Notice that comments are appended to the output listing each command,
providing an automatic audit log.)</p>
<p>In addition to typical database functions (select, join, etc.) there
are also a number of statistical functions.</p>
<p>The real power of Fsdb is that one can apply arbitary code to rows
to do powerful things.</p>
<pre>
        cat DATA/passwd | dbroweval '_fullname =~ s/(\w+)_(\w+)/$2,_$1/'</pre>
<p>converts &quot;John_Heidemann&quot; into &quot;Heidemann,_John&quot;.
Not too much more work could split fullname into firstname and lastname
fields.</p>
<p>
</p>
<hr />
<h1><a name="talking_about_columns">TALKING ABOUT COLUMNS</a></h1>
<p>An advantage of Fsdb is that you can talk about columns by name
(symbolically) rather than simply by their positions.  So in the above
example, <code>dbcol homedir</code> pulled out the home directory column, and
<code>dbrow '_fullname =~ /John/'</code> matched against column fullname.</p>
<p>In general, you can use the name of the column listed on the <code>#fsdb</code> line
to identify it in most programs, and _name to identify it in code.</p>
<p>Some alternatives for flexibility:</p>
<ul>
<li>
<p>Numeric values identify columns positionally, numbering from 0.
So 0 or _0 is the first column, 1 is the second, etc.</p>
</li>
<li>
<p>In code, _last_columnname gets the value from columname's previous row.</p>
</li>
</ul>
<p>See <a href="#dbroweval">dbroweval(1)</a> for more details about writing code.</p>
<p>
</p>
<hr />
<h1><a name="list_of_commands">LIST OF COMMANDS</a></h1>
<p>Enough said.  I'll summarize the commands, and then you can
experiment.  For a detailed description of each command, see a summary
by running it with the argument <code>--help</code> (or <code>-?</code> if you prefer.)
Full manual pages can be found by running the command
with the argument <code>--man</code>, or running the Unix command <code>man dbcol</code>
or whatever program you want.</p>
<p>
</p>
<h2><a name="table_creation">TABLE CREATION</a></h2>
<dl>
<dt><strong><a name="dbcolcreate" class="item">dbcolcreate</a></strong></dt>

<dd>
<p>add columns to a database</p>
</dd>
<dt><strong><a name="dbcoldefine" class="item">dbcoldefine</a></strong></dt>

<dd>
<p>set the column headings for a non-Fsdb file</p>
</dd>
</dl>
<p>
</p>
<h2><a name="table_manipulation">TABLE MANIPULATION</a></h2>
<dl>
<dt><strong><a name="dbcol" class="item">dbcol</a></strong></dt>

<dd>
<p>select columns from a table</p>
</dd>
<dt><strong><a name="dbrow" class="item">dbrow</a></strong></dt>

<dd>
<p>select rows from a table</p>
</dd>
<dt><strong><a name="dbsort" class="item">dbsort</a></strong></dt>

<dd>
<p>sort rows based on a set of columns</p>
</dd>
<dt><strong><a name="dbjoin" class="item">dbjoin</a></strong></dt>

<dd>
<p>compute the natural join of two tables</p>
</dd>
<dt><strong><a name="dbcolrename" class="item">dbcolrename</a></strong></dt>

<dd>
<p>rename a column</p>
</dd>
<dt><strong><a name="dbcolmerge" class="item">dbcolmerge</a></strong></dt>

<dd>
<p>merge two columns into one</p>
</dd>
<dt><strong><a name="dbcolsplittocols" class="item">dbcolsplittocols</a></strong></dt>

<dd>
<p>split one column into two or more columns</p>
</dd>
<dt><strong><a name="dbcolsplittorows" class="item">dbcolsplittorows</a></strong></dt>

<dd>
<p>split one column into multiple rows</p>
</dd>
<dt><strong><a name="dbfilepivot" class="item">dbfilepivot</a></strong></dt>

<dd>
<p>&quot;pivots&quot; a file, converting multiple rows
correponding to the same entity into a single row with multiple columns.</p>
</dd>
<dt><strong><a name="dbfilevalidate" class="item">dbfilevalidate</a></strong></dt>

<dd>
<p>check that db file doesn't have some common errors</p>
</dd>
</dl>
<p>
</p>
<h2><a name="computation_and_statistics">COMPUTATION AND STATISTICS</a></h2>
<dl>
<dt><strong><a name="dbcolstats" class="item">dbcolstats</a></strong></dt>

<dd>
<p>compute statistics over a column (mean,etc.,optionally median)</p>
</dd>
<dt><strong><a name="dbmultistats" class="item">dbmultistats</a></strong></dt>

<dd>
<p>group rows by some key value, then compute stats (mean, etc.) over each group
(equivalent to dbmapreduce with dbcolstats as the reducer)</p>
</dd>
<dt><strong><a name="dbmapreduce" class="item">dbmapreduce</a></strong></dt>

<dd>
<p>group rows (map) and then apply an arbitrary function to each group (reduce)</p>
</dd>
<dt><strong><a name="dbrvstatdiff" class="item">dbrvstatdiff</a></strong></dt>

<dd>
<p>compare two samples distributions (mean/conf interval/T-test)</p>
</dd>
<dt><strong><a name="dbcolmovingstats" class="item">dbcolmovingstats</a></strong></dt>

<dd>
<p>computing moving statistics over a column of data</p>
</dd>
<dt><strong><a name="dbcolstatscores" class="item">dbcolstatscores</a></strong></dt>

<dd>
<p>compute Z-scores and T-scores over one column of data</p>
</dd>
<dt><strong><a name="dbcolpercentile" class="item">dbcolpercentile</a></strong></dt>

<dd>
<p>compute the rank or percentile of a column</p>
</dd>
<dt><strong><a name="dbcolhisto" class="item">dbcolhisto</a></strong></dt>

<dd>
<p>compute histograms over a column of data</p>
</dd>
<dt><strong><a name="dbcolscorrelate" class="item">dbcolscorrelate</a></strong></dt>

<dd>
<p>compute the coefficient of correlation over several columns</p>
</dd>
<dt><strong><a name="dbcolsregression" class="item">dbcolsregression</a></strong></dt>

<dd>
<p>compute linear regression and correlation for two columns</p>
</dd>
<dt><strong><a name="dbrowaccumulate" class="item">dbrowaccumulate</a></strong></dt>

<dd>
<p>compute a running sum over a column of data</p>
</dd>
<dt><strong><a name="dbrowcount" class="item">dbrowcount</a></strong></dt>

<dd>
<p>count the number of rows (a subset of dbstats)</p>
</dd>
<dt><strong><a name="dbrowdiff" class="item">dbrowdiff</a></strong></dt>

<dd>
<p>compute differences between a columns in each row of a table</p>
</dd>
<dt><strong><a name="dbrowenumerate" class="item">dbrowenumerate</a></strong></dt>

<dd>
<p>number each row</p>
</dd>
<dt><strong><a name="dbroweval" class="item">dbroweval</a></strong></dt>

<dd>
<p>run arbitrary Perl code on each row</p>
</dd>
<dt><strong><a name="dbrowuniq" class="item">dbrowuniq</a></strong></dt>

<dd>
<p>count/eliminate identical rows (like Unix uniq(1))</p>
</dd>
<dt><strong><a name="dbfilediff" class="item">dbfilediff</a></strong></dt>

<dd>
<p>compare fields on rows of a file (something like Unix diff(1))</p>
</dd>
</dl>
<p>
</p>
<h2><a name="output_control">OUTPUT CONTROL</a></h2>
<dl>
<dt><strong><a name="dbcolneaten" class="item">dbcolneaten</a></strong></dt>

<dd>
<p>pretty-print columns</p>
</dd>
<dt><strong><a name="dbfilealter" class="item">dbfilealter</a></strong></dt>

<dd>
<p>convert between column or list format, or change the column separator</p>
</dd>
<dt><strong><a name="dbfilestripcomments" class="item">dbfilestripcomments</a></strong></dt>

<dd>
<p>remove comments from a table</p>
</dd>
<dt><strong><a name="dbformmail" class="item">dbformmail</a></strong></dt>

<dd>
<p>generate a script that sends form mail based on each row</p>
</dd>
</dl>
<p>
</p>
<h2><a name="conversions">CONVERSIONS</a></h2>
<p>(These programs convert data into fsdb.  See their web pages for details.)</p>
<dl>
<dt><strong><a name="cgi_to_db" class="item">cgi_to_db</a></strong></dt>

<dd>
<p><a href="http://stein.cshl.org/boulder/">http://stein.cshl.org/boulder/</a></p>
</dd>
<dt><strong><a name="combined_log_format_to_db" class="item">combined_log_format_to_db</a></strong></dt>

<dd>
<p><a href="http://httpd.apache.org/docs/2.0/logs.html">http://httpd.apache.org/docs/2.0/logs.html</a></p>
</dd>
<dt><strong><a name="html_table_to_db" class="item">html_table_to_db</a></strong></dt>

<dd>
<p>HTML tables to fsdb (assuming they're reasonably formatted).</p>
</dd>
<dt><strong><a name="kitrace_to_db" class="item">kitrace_to_db</a></strong></dt>

<dd>
<p><a href="http://ficus-www.cs.ucla.edu/ficus-members/geoff/kitrace.html">http://ficus-www.cs.ucla.edu/ficus-members/geoff/kitrace.html</a></p>
</dd>
<dt><strong><a name="ns_to_db" class="item">ns_to_db</a></strong></dt>

<dd>
<p><a href="http://mash-www.cs.berkeley.edu/ns/">http://mash-www.cs.berkeley.edu/ns/</a></p>
</dd>
<dt><strong><a name="tabdelim_to_db" class="item">tabdelim_to_db</a></strong></dt>

<dd>
<p>spreadsheet tab-delimited files to db</p>
</dd>
<dt><strong><a name="tcpdump_to_db" class="item">tcpdump_to_db</a></strong></dt>

<dd>
<p>(see man <code>tcpdump(8)</code> on any reasonable system)</p>
</dd>
<dt><strong><a name="xml_to_db" class="item">xml_to_db</a></strong></dt>

<dd>
<p>XML input to fsdb, assuming they're very regular</p>
</dd>
</dl>
<p>(And out of fsdb:)</p>
<dl>
<dt><strong><a name="db_to_csv" class="item">db_to_csv</a></strong></dt>

<dd>
<p>Comma-separated-value format from fsdb.</p>
</dd>
<dt><strong><a name="db_to_html_table" class="item">db_to_html_table</a></strong></dt>

<dd>
<p>simple conversion of Fsdb to html tables</p>
</dd>
</dl>
<p>
</p>
<h2><a name="standard_options">STANDARD OPTIONS</a></h2>
<p>Many programs have common options:</p>
<dl>
<dt><strong><a name="or_help" class="item"><strong>-?</strong> or <strong>--help</strong></a></strong></dt>

<dd>
<p>Show basic usage.</p>
</dd>
<dt><strong><a name="c_fraction_or_confidence_fraction" class="item"><strong>-c FRACTION</strong> or <strong>--confidence FRACTION</strong></a></strong></dt>

<dd>
<p>Specify confidence interval FRACTION (<a href="#dbcolstats">dbcolstats</a>, <a href="#dbmultistats">dbmultistats</a>, etc.)</p>
</dd>
<dt><strong><a name="c_s_or_element_separator_s" class="item"><strong>-C S</strong> or <code>--element-separator S</code></a></strong></dt>

<dd>
<p>Specify column separator S (<a href="#dbcolsplittocols">dbcolsplittocols</a>, <a href="#dbcolmerge">dbcolmerge</a>).</p>
</dd>
<dt><strong><a name="d_or_debug" class="item"><strong>-d</strong> or <strong>--debug</strong></a></strong></dt>

<dd>
<p>Enable debugging (may be repeated for greater effect in some cases).</p>
</dd>
<dt><strong><a name="a_or_include_non_numeric" class="item"><strong>-a</strong> or <strong>--include-non-numeric</strong></a></strong></dt>

<dd>
<p>Compute stats over all data (treating non-numbers as zeros).
(By default, things that can't be treated as numbers
are ignored for stats purposes)</p>
</dd>
<dt><strong><a name="s_or_pre_sorted" class="item"><strong>-S</strong> or <strong>--pre-sorted</strong></a></strong></dt>

<dd>
<p>Assume the data is pre-sorted.
May be repeated to disable verification (saving a small amount of work).</p>
</dd>
<dt><strong><a name="e_e_or_empty_e" class="item"><strong>-e E</strong> or <strong>--empty E</strong></a></strong></dt>

<dd>
<p>give value E as the value for empty (null) records</p>
</dd>
<dt><strong><a name="i_i_or_input_i" class="item"><strong>-i I</strong> or <strong>--input I</strong></a></strong></dt>

<dd>
<p>Input data from file I.</p>
</dd>
<dt><strong><a name="o_o_or_output_o" class="item"><strong>-o O</strong> or <strong>--output O</strong></a></strong></dt>

<dd>
<p>Write data out to file O.</p>
</dd>
<dt><strong><a name="nolog" class="item"><strong>--nolog</strong>.</a></strong></dt>

<dd>
<p>Skip logging the program in a trailing comment.</p>
</dd>
</dl>
<p>When giving Perl code (in <a href="#dbrow">dbrow</a> and <a href="#dbroweval">dbroweval</a>)
column names can be embedded if preceded by underscores.
Look at <a href="#dbrow">dbrow(1)</a> or <a href="#dbroweval">dbroweval(1)</a> for examples.)</p>
<p>Most programs run in constant memory and use temporary files if necessary.
Exceptions are <a href="#dbcolneaten">dbcolneaten</a>, <a href="#dbcolpercentile">dbcolpercentile</a>, <a href="#dbmapreduce">dbmapreduce</a>,
<a href="#dbmultistats">dbmultistats</a>, <em>dbrowsplituniq</em>.</p>
<p>
</p>
<hr />
<h1><a name="another_example">ANOTHER EXAMPLE</a></h1>
<p>Take the raw data in <code>DATA/http_bandwidth</code>,
put a header on it (<code>dbcoldefine size bw</code>),
took statistics of each category (<code>dbmultistats -k size bw</code>),
pick out the relevant fields (<code>dbcol size mean stddev pct_rsd</code>), and you get:</p>
<pre>
        #fsdb size mean stddev pct_rsd
        1024    1.4962e+06      2.8497e+05      19.047
        10240   5.0286e+06      6.0103e+05      11.952
        102400  4.9216e+06      3.0939e+05      6.2863
        #  | dbcoldefine size bw
        #  | /home/johnh/BIN/DB/dbmultistats -k size bw
        #  | /home/johnh/BIN/DB/dbcol size mean stddev pct_rsd</pre>
<p>(The whole command was:</p>
<pre>
        cat DATA/http_bandwidth |
        dbcoldefine size |
        dbmultistats -k size bw |
        dbcol size mean stddev pct_rsd</pre>
<p>all on one line.)</p>
<p>Then post-process them to get rid of the exponential notation
by adding this to the end of the pipeline:</p>
<pre>
    dbroweval '_mean = sprintf(&quot;%8.0f&quot;, _mean); _stddev = sprintf(&quot;%8.0f&quot;, _stddev);'</pre>
<p>(Actually, this step is no longer required since <a href="#dbcolstats">dbcolstats</a>
now uses a different default format.)</p>
<p>giving:</p>
<pre>
        #fsdb      size    mean    stddev  pct_rsd
        1024     1496200          284970        19.047
        10240    5028600          601030        11.952
        102400   4921600          309390        6.2863
        #  | dbcoldefine size bw
        #  | dbmultistats -k size bw
        #  | dbcol size mean stddev pct_rsd
        #  | dbroweval   { _mean = sprintf(&quot;%8.0f&quot;, _mean); _stddev = sprintf(&quot;%8.0f&quot;, _stddev); }</pre>
<p>In a few lines, raw data is transformed to processed output.</p>
<p>Suppose you expect there is an odd distribution of results of one
datapoint.  Fsdb can easily produce a CDF (cumulative distribution
function) of the data, suitable for graphing:</p>
<pre>
    cat DB/DATA/http_bandwidth | \
        dbcoldefine size bw | \
        dbrow '_size == 102400' | \
        dbcol bw | \
        dbsort -n bw | \
        dbrowenumerate | \
        dbcolpercentile count | \
        dbcol bw percentile | \
        xgraph</pre>
<p>The steps, roughly:
1. get the raw input data and turn it into fsdb format,
2. pick out just the relevant column (for efficiency) and sort it,
3. for each data point, assign a CDF percentage to it,
4. pick out the two columns to graph and show them</p>
<p>
</p>
<hr />
<h1><a name="a_gradebook_example">A GRADEBOOK EXAMPLE</a></h1>
<p>The first commercial program I wrote was a gradebook,
so here's how to do it with Fsdb.</p>
<p>Format your data like DATA/grades.</p>
<pre>
        #fsdb name email id test1
        a a@ucla.example.edu 1 80
        b b@usc.example.edu 2 70
        c c@isi.example.edu 3 65
        d d@lmu.example.edu 4 90
        e e@caltech.example.edu 5 70
        f f@oxy.example.edu 6 90</pre>
<p>Or if your students have spaces in their names, use <code>-F S</code> and two spaces
to separate each column:</p>
<pre>
        #fsdb -F S name email id test1
        alfred aho  a@ucla.example.edu  1  80
        butler lampson  b@usc.example.edu  2  70
        david clark  c@isi.example.edu  3  65
        constantine drovolis  d@lmu.example.edu  4  90
        debrorah estrin  e@caltech.example.edu  5  70
        sally floyd  f@oxy.example.edu  6  90</pre>
<p>To compute statistics on an exam, do</p>
<pre>
        cat DATA/grades | dbstats test1 |dblistize</pre>
<p>giving</p>
<pre>
        #fsdb -R C  ...
        mean:        77.5
        stddev:      10.84
        pct_rsd:     13.987
        conf_range:  11.377
        conf_low:    66.123
        conf_high:   88.877
        conf_pct:    0.95
        sum:         465
        sum_squared: 36625
        min:         65
        max:         90
        n:           6
        ...</pre>
<p>To do a histogram:</p>
<pre>
        cat DATA/grades | dbcolhisto -n 5 -g test1</pre>
<p>giving</p>
<pre>
        #fsdb low histogram
        65      *
        70      **
        75
        80      *
        85
        90      **
        #  | /home/johnh/BIN/DB/dbhistogram -n 5 -g test1</pre>
<p>Now you want to send out grades to the students by e-mail.
Create a form-letter (in the file <em class="file">test1.txt</em>):</p>
<pre>
        To: _email (_name)
        From: J. Random Professor &lt;jrp@usc.example.edu&gt;
        Subject: test1 scores</pre>
<pre>
        _name, your score on test1 was _test1.
        86+   A
        75-85 B
        70-74 C
        0-69  F</pre>
<p>Generate the shell script that will send the mail out:</p>
<pre>
        cat DATA/grades | dbformmail test1.txt &gt; test1.sh</pre>
<p>And run it:</p>
<pre>
        sh &lt;test1.sh</pre>
<p>The last two steps can be combined:</p>
<pre>
        cat DATA/grades | dbformmail test1.txt | sh</pre>
<p>but I like to keep a copy of exactly what I send.</p>
<p>At the end of the semester you'll want to compute grade totals and
assign letter grades.  Both fall out of dbroweval.
For example, to compute weighted total grades with a 40% midterm/60%
final where the midterm is 84 possible points and the final 100:</p>
<pre>
        dbcol -rv total |
        dbcolcreate total - |
        dbroweval '
                _total = .40 * _midterm/84.0 + .60 * _final/100.0;
                _total = sprintf(&quot;%4.2f&quot;, _total);
                if (_final eq &quot;-&quot; || ( _name =~ /^_/)) { _total = &quot;-&quot;; };' | 
        dbcolneaten</pre>
<p>If you got the data originally from a spreadsheet, save it in
&quot;tab-delimited&quot; format and convert it with tabdelim_to_db
(run tabdelim_to_db -? for examples).</p>
<p>
</p>
<hr />
<h1><a name="a_password_example">A PASSWORD EXAMPLE</a></h1>
<p>To convert the Unix password file to db:</p>
<pre>
        cat /etc/passwd | sed 's/:/  /g'| \
                dbcoldefine -F S login password uid gid gecos home shell \
                &gt;passwd.fsdb</pre>
<p>To convert the group file</p>
<pre>
        cat /etc/group | sed 's/:/  /g' | \
                dbcoldefine -F S group password gid members \
                &gt;group.fsdb</pre>
<p>To show the names of the groups that div7-members are in
(assuming DIV7 is in the gecos field):</p>
<pre>
        cat passwd.fsdb | dbrow '_gecos =~ /DIV7/' | dbcol login gid | \
                dbjoin -i - -i group.fsdb gid | dbcol login group</pre>
<p>
</p>
<hr />
<h1><a name="short_examples">SHORT EXAMPLES</a></h1>
<p>Which Fsdb programs are the most complicated (based on number of test cases)?</p>
<pre>
        ls TEST/*.cmd | \
                dbcoldefine test | \
                dbroweval '_test =~ s@^TEST/([^_]+).*$@$1@' | \
                dbrowuniq -c | \
                dbsort -nr count | \
                dbcolneaten</pre>
<p>(Answer: <a href="#dbmapreduce">dbmapreduce</a>, then <a href="#dbcolstats">dbcolstats</a>, <a href="#dbfilealter">dbfilealter</a> and <a href="#dbjoin">dbjoin</a>.)</p>
<p>Stats on an exam (in <code>$FILE</code>, where <code>$COLUMN</code> is the name of the exam)?</p>
<pre>
        cat $FILE | dbcolstats -q 4 $COLUMN &lt;$FILE | dblistize | dbstripcomments</pre>
<pre>
        cat $FILE | dbcolhisto -g -n 20 $COLUMN | dbcolneaten | dbstripcomments</pre>
<p>Merging a the hw1 column from file hw1.fsdb into grades.fsdb assuing
there's a common student id in column &quot;id&quot;:</p>
<pre>
        dbcol id hw1 &lt;hw1.fsdb &gt;t.fsdb</pre>
<pre>
        dbjoin -a -e - grades.fsdb t.fsdb id | \
            dbsort  name | \
            dbcolneaten &gt;new_grades.fsdb</pre>
<p>Merging two fsdb files with the same rows:</p>
<pre>
        cat file1.fsdb file2.fsdb &gt;output.fsdb</pre>
<p>or if you want to clean things up a bit</p>
<pre>
        cat file1.fsdb file2.fsdb | dbstripextraheaders &gt;output.fsdb</pre>
<p>or if you want to know where the data came from</p>
<pre>
        for i in 1 2
        do
                dbcolcreate source $i &lt; file$i.fsdb
        done &gt;output.fsdb</pre>
<p>(assumes you're using a Bourne-shell compatible shell, not csh).</p>
<p>
</p>
<hr />
<h1><a name="warnings">WARNINGS</a></h1>
<p>As with any tool, one should (which means <em>must</em>) understand
the limits of the tool.</p>
<p>All Fsdb tools should run in <em>constant memory</em>.
In some cases (such as <em class="file">dbcolstats</em> with quartiles, where the whole input
must be re-read), programs will spool data to disk if necessary.</p>
<p>Most tools buffer one or a few lines of data, so memory
will scale with the size of each line.
(So lines with many columns, or when columns have lots data,
may cause larege memory consumption.)</p>
<p>All Fsdb tools should run in constant or at worst <code>n log n</code> time.</p>
<p>All Fsdb tools use normal Perl math routines for computation.
Although I make every attempt to choose numerically stable algorithms,
normal rounding due to computer floating point approximations
can result in inaccuracies when data spans a large range of precisions.
(See for example the <em class="file">dbcolstats_extrema</em> test cases.)</p>
<p>Any requirements and limitations of each Fsdb tool
is documented on its manual page.</p>
<p>If any Fsdb program violates these assumptions,
that is a bug that should be documented
on the tool's manual page or ideally fixed.</p>
<p>
</p>
<hr />
<h1><a name="history">HISTORY</a></h1>
<p>There have been three versions of Fsdb;
fsdb 1.0 is a complete re-write of the pre-1995 versions,
and was 
distributed from 1995 to 2007.
Fsdb 2.0 is a significant re-write of the 1.x versions
for reasons described below.</p>
<p>Fsdb (in its various forms) has been used extensively by its author
since 1991.  Since 1995 it's been used by two other researchers at
UCLA and several at ISI.  In February 1998 it was announced to the
Internet.  Since then it has found a few users, some outside where I
work.</p>
<p>
</p>
<h2><a name="fsdb_2_0_rationale">Fsdb 2.0 Rationale</a></h2>
<p>I've thought about fsdb-2.0 for many years, but it was started
in earnest in 2007.  Fsdb-2.0 has the following goals:</p>
<dl>
<dt><strong><a name="in_one_process_processing" class="item">in-one-process processing</a></strong></dt>

<dd>
<p>While fsdb is great on the Unix command line as a pipeline between
programs, it should <em>also</em> be possible to set it up to run in a single
process.  And if it does so, it should be able to avoid serializing
and deserializing (converting to and from text) data between each module.
(Accomplished in fsdb-2.0: see <em>dbpipeline</em>, although still needs tuning.)</p>
</dd>
<dt><strong><a name="clean" class="item">clean IO API</a></strong></dt>

<dd>
<p>Fsdb's roots go back to perl4 and 1991, so the fsdb-1.x library is
very, very crufty.  More than just being ugly (but it was that too),
this made things reading from one format file and writing to another
the application's job, when it should be the library's.
(Accomplished in fsdb-1.15 and improved in 2.0: see <a href="/Fsdb/IO.html">the Fsdb::IO manpage</a>.)</p>
</dd>
<dt><strong><a name="normalized_module_apis" class="item">normalized module APIs</a></strong></dt>

<dd>
<p>Because fsdb modules were added as needed over 10 years,
sometimes the module APIs became inconsistent.
(For example, the 1.x <a href="#dbcolcreate"><code>dbcolcreate</code></a> required an empty
value following the name of the new column,
but other programs specify empty values with the <code>-e</code> argument.)
We should smooth over these inconsistencies.
(Accomplished as each module was ported in 2.0 through 2.7.)</p>
</dd>
<dt><strong><a name="everyone_handles_all_input_formats" class="item">everyone handles all input formats</a></strong></dt>

<dd>
<p>Given a clean IO API, the distinction between &quot;colized&quot;
and &quot;listized&quot; fsdb files should go away.  Any program
should be able to read and write files in any format.
(Accomplished in fsdb-2.1.)</p>
</dd>
</dl>
<p>Fsdb-2.0 preserves backwards compatibility where possible,
but breaks it where necessary to accomplish the above goals.
In August 2008, fsdb-2.7 was declared preferred over the 1.x versions.</p>
<p>
</p>
<h2><a name="contributors">Contributors</a></h2>
<p>Fsdb includes code ported from Geoff Kuenning (<code>Fsdb::Support::TDistribution</code>).</p>
<p>Fsdb contributors:  
Ashvin Goel <em class="file"><a href="mailto:goel@cse.oge.edu">goel@cse.oge.edu</a></em>,
Geoff Kuenning <em class="file"><a href="mailto:geoff@fmg.cs.ucla.edu">geoff@fmg.cs.ucla.edu</a></em>,
Vikram Visweswariah <em class="file"><a href="mailto:visweswa@isi.edu">visweswa@isi.edu</a></em>,
Kannan Varadahan <em class="file"><a href="mailto:kannan@isi.edu">kannan@isi.edu</a></em>,
Lars Eggert <em class="file"><a href="mailto:larse@isi.edu">larse@isi.edu</a></em>,
Arkadi Gelfond <em class="file"><a href="mailto:arkadig@dyna.com">arkadig@dyna.com</a></em>,
David Graff <em class="file"><a href="mailto:graff@ldc.upenn.edu">graff@ldc.upenn.edu</a></em>,
Haobo Yu <em class="file"><a href="mailto:haoboy@packetdesign.com">haoboy@packetdesign.com</a></em>,
Pavlin Radoslavov <em class="file"><a href="mailto:pavlin@catarina.usc.edu">pavlin@catarina.usc.edu</a></em>,
Graham Phillips,
Yuri Pradkin,
Alefiya Hussain,
Ya Xu,
Fabio Silva <em class="file"><a href="mailto:fabio@isi.edu">fabio@isi.edu</a></em>,
Jerry Zhao <em class="file"><a href="mailto:zhaoy@isi.edu">zhaoy@isi.edu</a></em>,
Ning Xu <em class="file"><a href="mailto:nxu@aludra.usc.edu">nxu@aludra.usc.edu</a></em>,
Martin Lukac <em class="file"><a href="mailto:mlukac@lecs.cs.ucla.edu">mlukac@lecs.cs.ucla.edu</a></em>,
Xue Cai,
Michael McQuaid.</p>
<p>Fsdb includes datasets contributed from NIST (DATA/nist_zarr13.fsdb),
from
<a href="http://www.itl.nist.gov/div898/handbook/eda/section4/eda4281.htm">http://www.itl.nist.gov/div898/handbook/eda/section4/eda4281.htm</a>,
the NIST/SEMATECH e-Handbook of Statistical Methods, section
1.4.2.8.1. Background and Data.  The source is public domain, and
reproduced with permission.</p>
<p>
</p>
<hr />
<h1><a name="related_work">RELATED WORK</a></h1>
<p>As stated in the introduction, Fsdb is an incompatible reimplementation
of the ideas found in <code>/rdb</code>.  By storing data in simple text files and
processing it with pipelines it is easy to experiment (in the shell)
and look at the output.  The original implementation of this idea was
/rdb, a commercial product described in the book <em>UNIX relational
database management: application development in the UNIX environment</em>
by Rod Manis, Evan Schaffer, and Robert Jorgensen (and also at the web
page <a href="http://www.rdb.com/">http://www.rdb.com/</a>).</p>
<p>While Fsdb is inspired by Rdb, it includes no code from it,
and Fsdb makes several different design choices.
In particular: rdb attempts to be closer to a &quot;real&quot; database,
with provision for locking, file indexing.
Fsdb focuses on single user use and so eschews these choices.
Rdb also has some support for interactive editing.
Fsdb leaves editing to text editors like emacs or vi.</p>
<p>In August, 2002 I found out Carlo Strozzi extended RDB with his
package NoSQL <a href="http://www.linux.it/~carlos/nosql/">http://www.linux.it/~carlos/nosql/</a>.  According to
Mr. Strozzi, he implemented NoSQL in awk to avoid the Perl start-up of
RDB.  Although I haven't found Perl startup overhead to be a big
problem on my platforms (from old Sparcstation IPCs to 2GHz
Pentium-4s), you may want to evaluate his system.
The Linux Journal has a description of NoSQL
at <a href="http://www.linuxjournal.com/article/3294">http://www.linuxjournal.com/article/3294</a>.
It seems quite similar to Fsdb.
Like /rdb, NoSQL supports indexing (not present in Fsdb).
Fsdb appears to have richer support for statistics,
and, as of Fsdb-2.x, its support for Perl threading may support
faster performance (one-process, less serialization and deserialization).</p>
<p>
</p>
<hr />
<h1><a name="release_notes">RELEASE NOTES</a></h1>
<p>Versions prior to 1.0 were released informally on my web page
but were not announced.</p>
<p>
</p>
<h2><a name="0_0_1991">0.0 1991</a></h2>
<p>started for my own research use</p>
<p>
</p>
<h2><a name="0_1_26_may_94">0.1 26-May-94</a></h2>
<p>first check-in to RCS</p>
<p>
</p>
<h2><a name="0_2_15_mar_95">0.2 15-Mar-95</a></h2>
<p>parts now require perl5</p>
<p>
</p>
<h2><a name="1_0__22_jul_97">1.0, 22-Jul-97</a></h2>
<p>adds autoconf support and a test script.</p>
<p>
</p>
<h2><a name="1_1__20_jan_98">1.1, 20-Jan-98</a></h2>
<p>support for double space field separators, better tests</p>
<p>
</p>
<h2><a name="1_2__11_feb_98">1.2, 11-Feb-98</a></h2>
<p>minor changes and release on comp.lang.perl.announce</p>
<p>
</p>
<h2><a name="1_3__17_mar_98">1.3, 17-Mar-98</a></h2>
<ul>
<li><strong><a name="adds_median_and_quartile_options_to_dbstats" class="item">adds median and quartile options to dbstats</a></strong>

</li>
<li>
<p>adds dmalloc_to_db converter</p>
</li>
<li>
<p>fixes some warnings</p>
</li>
<li>
<p>dbjoin now can run on unsorted input</p>
</li>
<li>
<p>fixes a dbjoin bug</p>
</li>
<li>
<p>some more tests in the test suite</p>
</li>
</ul>
<p>
</p>
<h2><a name="1_4__27_mar_98">1.4, 27-Mar-98</a></h2>
<ul>
<li>
<p>improves error messages (all should now report the program that makes the error)</p>
</li>
<li>
<p>fixed a bug in dbstats output when the mean is zero</p>
</li>
</ul>
<p>
</p>
<h2><a name="1_5__25_jun_98">1.5, 25-Jun-98</a></h2>
<dl>
<dt><strong><a name="bug_fix_dbcolhisto_dbcolpercentile_now_handles_non_numeric_values_like_dbstats" class="item">BUG FIX
dbcolhisto, dbcolpercentile now handles non-numeric values like dbstats</a></strong></dt>

<dt><strong><a name="new_dbcolstats_computes_zscores_and_tscores_over_a_column" class="item">NEW
dbcolstats computes zscores and tscores over a column</a></strong></dt>

<dt><strong><a name="new_dbcolscorrelate_computes_correlation_coefficients_between_two_columns" class="item">NEW
dbcolscorrelate computes correlation coefficients between two columns</a></strong></dt>

<dt><strong><a name="internal_ficus_getopt_pl_has_been_replaced_by_dbgetopt_pm" class="item">INTERNAL
ficus_getopt.pl has been replaced by DbGetopt.pm</a></strong></dt>

<dt><strong><a name="bug_fix_all_tests_are_now_portable_previously_some_tests_ran_only_on_my_system" class="item">BUG FIX
all tests are now ``portable'' (previously some tests ran only on my system)</a></strong></dt>

<dt><strong><a name="path" class="item">BUG FIX
you no longer need to have the db programs in your path (fix arose from a discussion with Arkadi Gelfond)</a></strong></dt>

<dt><strong><a name="f" class="item">BUG FIX
installation no longer uses cp -f (to work on SunOS 4)</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_6__24_may_99">1.6, 24-May-99</a></h2>
<dl>
<dt><strong><a name="memory" class="item">NEW
dbsort, dbstats, dbmultistats now run in constant memory (using tmp files if necessary)</a></strong></dt>

<dt><strong><a name="new_dbcolmovingstats_does_moving_means_over_a_series_of_data" class="item">NEW
dbcolmovingstats does moving means over a series of data</a></strong></dt>

<dt><strong><a name="new_dbcol_has_a_v_option_to_get_all_columns_except_those_listed" class="item">NEW
dbcol has a -v option to get all columns except those listed</a></strong></dt>

<dt><strong><a name="new_dbmultistats_does_quartitles_and_medians" class="item">NEW
dbmultistats does quartitles and medians</a></strong></dt>

<dt><strong><a name="new_dbstripextraheaders_now_also_cleans_up_bogus_comments_before_the_fist_header" class="item">NEW
dbstripextraheaders now also cleans up bogus comments before the fist header</a></strong></dt>

<dt><strong><a name="bug_fix_dbcolneaten_works_better_with_double_space_separated_data" class="item">BUG FIX
dbcolneaten works better with double-space-separated data</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_7__5_jan_00">1.7,  5-Jan-00</a></h2>
<dl>
<dt><strong><a name="new_dbcolize_now_detects_and_rejects_lines_that_contain_embedded_copies_of_the_field_separator" class="item">NEW
dbcolize now detects and rejects lines that contain embedded copies of the field separator</a></strong></dt>

<dt><strong><a name="new_configure_tries_harder_to_prevent_people_from_improperly_configuring_installing_fsdb" class="item">NEW
configure tries harder to prevent people from improperly configuring/installing fsdb</a></strong></dt>

<dt><strong><a name="converter" class="item">NEW
tcpdump_to_db converter (incomplete)</a></strong></dt>

<dt><strong><a name="new_tabdelim_to_db_converter_from_spreadsheet_tab_delimited_files_to_db" class="item">NEW
tabdelim_to_db converter:  from spreadsheet tab-delimited files to db</a></strong></dt>

<dt><strong><a name="new_mailing_lists_for_fsdb_are_fsdb_announce_heidemann_la_ca_us_and_fsdb_talk_heidemann_la_ca_us" class="item">NEW
mailing lists for fsdb are	<code>fsdb-announce@heidemann.la.ca.us</code> and	<code>fsdb-talk@heidemann.la.ca.us</code></a></strong></dt>

<dd>
<p>To subscribe to either, send mail to	<code>fsdb-announce-request@heidemann.la.ca.us</code>	or <code>fsdb-talk-request@heidemann.la.ca.us</code>     with &quot;subscribe&quot; in the BODY of the message.</p>
</dd>
<dt><strong><a name="bug_fix_dbjoin_used_to_produce_incorrect_output_if_there_were_extra_unmatched_values_in_the_2nd_table_thanks_to_graham_phillips_for_providing_a_test_case" class="item">BUG FIX
dbjoin used to produce incorrect output if there were extra, unmatched values in the 2nd table. Thanks to Graham Phillips for providing a test case.</a></strong></dt>

<dt><strong><a name="data" class="item">BUG FIX
the sample commands in the usage strings now all should explicitly include the source of data (typically from &quot;cat foo.fsdb |&quot;).  Thanks to Ya Xu for pointing out this documentation deficiency.</a></strong></dt>

<dt><strong><a name="fix" class="item">BUG FIX (DOCUMENTATION)
dbcolmovingstats had incorrect sample output.</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_8__28_jun_00">1.8, 28-Jun-00</a></h2>
<dl>
<dt><strong><a name="bug_fix_header_options_are_now_preserved_when_writing_with_dblistize" class="item">BUG FIX
header options are now preserved when writing with dblistize</a></strong></dt>

<dt><strong><a name="new_dbrowuniq_now_optionally_checks_for_uniqueness_only_on_certain_fields" class="item">NEW
dbrowuniq now optionally checks for uniqueness only on certain fields</a></strong></dt>

<dt><strong><a name="new_dbrowsplituniq_makes_one_pass_through_a_file_and_splits_it_into_separate_files_based_on_the_given_fields" class="item">NEW
dbrowsplituniq makes one pass through a file and splits it into separate files based on the given fields</a></strong></dt>

<dt><strong><a name="new_converter_for_crl_format_network_traces" class="item">NEW
converter for &quot;crl&quot; format network traces</a></strong></dt>

<dt><strong><a name="code" class="item">NEW
anywhere you use arbitrary code (like dbroweval), _last_foo now maps to the last row's value for field _foo.</a></strong></dt>

<dt><strong>OPTIMIZATION
comment processing slightly changed so that dbmultistats now is much faster on files with lots of comments (for example, ~100k lines of comments and 700 lines of data!) (Thanks to Graham Phillips for pointing out this performance problem.)</strong></dt>

<dt><strong><a name="bug_fix_dbstats_with_median_quartiles_now_correctly_handles_singleton_data_points" class="item">BUG FIX
dbstats with median/quartiles now correctly handles singleton data points.</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_9__6_nov_00">1.9,  6-Nov-00</a></h2>
<dl>
<dt><strong><a name="files" class="item">NEW
dbfilesplit, split a single input file into multiple output files (based on code contributed by Pavlin Radoslavov).</a></strong></dt>

<dt><strong><a name="bug_fix_dbsort_now_works_with_perl_5_6" class="item">BUG FIX
dbsort now works with perl-5.6</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_10__10_apr_01">1.10, 10-Apr-01</a></h2>
<dl>
<dt><strong><a name="bug_fix_dbstats_now_handles_the_case_where_there_are_more_n_tiles_than_data" class="item">BUG FIX
dbstats now handles the case where there are more n-tiles than data</a></strong></dt>

<dt><strong>NEW
dbstats now includes a -S option to optimize work on pre-sorted data (inspired by code contributed by Haobo Yu)</strong></dt>

<dt><strong><a name="records" class="item">BUG FIX
dbsort now has a better estimate of memory usage when run on data with very short records (problem detected by Haobo Yu)</a></strong></dt>

<dt><strong><a name="bug_fix_cleanup_of_temporary_files_is_slightly_better" class="item">BUG FIX
cleanup of temporary files is slightly better</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_11__2_nov_01">1.11,  2-Nov-01</a></h2>
<dl>
<dt><strong><a name="bug_fix_dbcolneaten_now_runs_in_constant_memory" class="item">BUG FIX
dbcolneaten now runs in constant memory</a></strong></dt>

<dt><strong><a name="new_dbcolneaten_now_supports_field_specifiers_that_allow_some_control_over_how_wide_columns_should_be" class="item">NEW
dbcolneaten now supports &quot;field specifiers&quot; that allow some control over how wide columns should be</a></strong></dt>

<dt><strong><a name="friendly" class="item">OPTIMIZATION
dbsort now tries hard to be filesystem cache-friendly (inspired by &quot;Information and Control in Gray-box Systems&quot; by the Arpaci-Dusseau's at SOSP 2001)</a></strong></dt>

<dt><strong><a name="internal_t_distr_now_ported_to_perl5_module_dbtdistr" class="item">INTERNAL
t_distr now ported to perl5 module DbTDistr</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_12__30_oct_02">1.12,  30-Oct-02</a></h2>
<dl>
<dt><strong><a name="bug_fix_dbmultistats_documentation_typo_fixed" class="item">BUG FIX
dbmultistats documentation typo fixed</a></strong></dt>

<dt><strong><a name="new_dbcolmultiscale" class="item">NEW
dbcolmultiscale</a></strong></dt>

<dt><strong><a name="new_dbcol_has_r_option_for_relaxed_error_checking" class="item">NEW
dbcol has -r option for &quot;relaxed error checking&quot;</a></strong></dt>

<dt><strong><a name="new_dbcolneaten_has_new_e_option_to_strip_end_of_line_spaces" class="item">NEW
dbcolneaten has new -e option to strip end-of-line spaces</a></strong></dt>

<dt><strong><a name="new_dbrow_finally_has_a_v_option_to_negate_the_test" class="item">NEW
dbrow finally has a -v option to negate the test</a></strong></dt>

<dt><strong><a name="goel" class="item">BUG FIX
math bug in dbcoldiff fixed by Ashvin Goel (need to check Scheaffer test cases)</a></strong></dt>

<dt><strong><a name="programs" class="item">BUG FIX
some patches to run with Perl 5.8. Note: some programs (dbcolmultiscale, dbmultistats, dbrowsplituniq) generate warnings like: &quot;Use of uninitialized value in concatenation (.)&quot; or &quot;string at /usr/lib/perl5/5.8.0/FileCache.pm line 98, &lt;STDIN&gt; line 2&quot;. Please ignore this until I figure out how to suppress it. (Thanks to Jerry Zhao for noticing perl-5.8 problems.)</a></strong></dt>

<dt><strong><a name="prefix" class="item">BUG FIX
fixed an autoconf problem where configure would fail to find a reasonable prefix (thanks to Fabio Silva for reporting the problem)</a></strong></dt>

<dt><strong><a name="tables" class="item">NEW
db_to_html_table: simple conversion to html tables (NO fancy stuff)</a></strong></dt>

<dt><strong><a name="dblib_text2html" class="item">NEW
dblib now has a function dblib_text2html() that will do simple conversion of iso-8859-1 to HTML</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_13__4_feb_04">1.13,  4-Feb-04</a></h2>
<dl>
<dt><strong><a name="new_fsdb_added_to_the_freebsd_ports_tree_http_www_freshports_org_databases_fsdb_maintainer_larse_isi_edu" class="item">NEW
fsdb added to the freebsd ports tree <a href="http://www.freshports.org/databases/fsdb/">http://www.freshports.org/databases/fsdb/</a>.  Maintainer: <code>larse@isi.edu</code></a></strong></dt>

<dt><strong><a name="numeric" class="item">BUG FIX
properly handle trailing spaces when data must be numeric (ex. dbstats with -FS, see test dbstats_trailing_spaces). Fix from Ning Xu <code>nxu@aludra.usc.edu</code>.</a></strong></dt>

<dt><strong><a name="improved" class="item">NEW
dbcolize error message improved (bug report from Terrence Brannon), and list format documented in the README.</a></strong></dt>

<dt><strong><a name="new_cgi_to_db_converts_cgi_pm_format_storage_to_fsdb_list_format" class="item">NEW
cgi_to_db converts CGI.pm-format storage to fsdb list format</a></strong></dt>

<dt><strong><a name="bug_fix_handle_numeric_synonyms_for_column_names_in_dbcol_properly" class="item">BUG FIX
handle numeric synonyms for column names in dbcol properly</a></strong></dt>

<dt><strong><a name="enhancement_talking_about_columns_section_added_to_readme_lack_of_documentation_pointed_out_by_lars_eggert" class="item">ENHANCEMENT
&quot;talking about columns&quot; section added to README. Lack of documentation pointed out by Lars Eggert.</a></strong></dt>

<dt><strong><a name="mail" class="item">CHANGE
dbformmail now defaults to using Mail (&quot;Berkeley Mail&quot;) to send mail, rather than sendmail (sendmail is still an option, but mail doesn't require running as root)</a></strong></dt>

<dt><strong><a name="it" class="item">NEW
on platforms that support it (i.e., with perl 5.8), fsdb works fine with unicode</a></strong></dt>

<dt><strong><a name="new_dbfilevalidate_check_a_db_file_for_some_common_errors" class="item">NEW
dbfilevalidate: check a db file for some common errors</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_14__24_aug_06">1.14,  24-Aug-06</a></h2>
<dl>
<dt><strong><a name="enhancement_readme_cleanup" class="item">ENHANCEMENT
README cleanup</a></strong></dt>

<dt><strong><a name="incompatible_change_dbcolsplit_renamed_dbcolsplittocols" class="item">INCOMPATIBLE CHANGE
dbcolsplit renamed dbcolsplittocols</a></strong></dt>

<dt><strong><a name="new_dbcolsplittorows_split_one_column_into_multiple_rows" class="item">NEW
dbcolsplittorows  split one column into multiple rows</a></strong></dt>

<dt><strong><a name="new_dbcolsregression_compute_linear_regression_and_correlation_for_two_columns" class="item">NEW
dbcolsregression compute linear regression and correlation for two columns</a></strong></dt>

<dt><strong><a name="enhancement_cvs_to_db_better_error_handling_normalize_field_names_skip_blank_lines" class="item">ENHANCEMENT
cvs_to_db: better error handling, normalize field names, skip blank lines</a></strong></dt>

<dt><strong><a name="detects" class="item">ENHANCEMENT
dbjoin now detects (and fails) if non-joined files have duplicate names</a></strong></dt>

<dt><strong><a name="distributions" class="item">BUG FIX
minor bug fixed in calculation of Student t-distributions (doesn't change any test output, but may have caused small errors)</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="1_15__12_nov_07">1.15, 12-Nov-07</a></h2>
<dl>
<dt><strong><a name="new_fsdb_1_14_added_to_the_macos_fink_system_http_pdb_finkproject_org_pdb_package_php_fsdb_thanks_to_lars_eggert_for_maintaining_this_port" class="item">NEW
fsdb-1.14 added to the MacOS Fink system <a href="http://pdb.finkproject.org/pdb/package.php/fsdb">http://pdb.finkproject.org/pdb/package.php/fsdb</a>. (Thanks to Lars Eggert for maintaining this port.)</a></strong></dt>

<dt><strong><a name="new_fsdb_io_reader_and_fsdb_io_writer_now_provide_reasonably_clean_oo_i_o_interfaces_to_fsdb_files_highly_recommended_if_you_use_fsdb_directly_from_perl_in_the_fullness_of_time_i_expect_to_reimplement_the_entire_thing_using_these_apis_to_replace_the_current_dblib_pl_which_is_still_hobbled_by_its_roots_in_perl4" class="item">NEW
Fsdb::IO::Reader and Fsdb::IO::Writer now provide reasonably clean OO I/O interfaces to Fsdb files.  Highly recommended if you use fsdb directly from perl.  In the fullness of time I expect to reimplement the entire thing using these APIs to replace the current dblib.pl which is still hobbled by its roots in perl4.</a></strong></dt>

<dt><strong><a name="new_dbmapreduce_now_implements_a_google_style_map_reduce_abstraction_generalizing_dbmultistats" class="item">NEW
dbmapreduce now implements a Google-style map/reduce abstraction, generalizing dbmultistats.</a></strong></dt>

<dt><strong><a name="system" class="item">ENHANCEMENT
fsdb now uses the Perl build system (Makefile.PL, etc.), instead of autoconf.  This change paves the way to better perl-5-style modularization, proper manual pages, input of both listize and colize format for every program, and world peace.</a></strong></dt>

<dt><strong><a name="enhancement_dblib_pl_is_now_moved_to_fsdb_old_pm" class="item">ENHANCEMENT
dblib.pl is now moved to Fsdb::Old.pm.</a></strong></dt>

<dt><strong><a name="argument" class="item">BUG FIX
dbmultistats now propagates its format argument (-f). Bug and fix from Martin Lukac (thanks!).</a></strong></dt>

<dt><strong><a name="enhancement_dbformmail_documentation_now_is_clearer_that_it_doesn_t_send_the_mail_you_have_to_run_the_shell_script_it_writes_problem_observed_by_unkyu_park" class="item">ENHANCEMENT
dbformmail documentation now is clearer that it doesn't send the mail, you have to run the shell script it writes.  (Problem observed by Unkyu Park.)</a></strong></dt>

<dt><strong><a name="61" class="item">ENHANCEMENT
adapted to autoconf-2.61 (and then these changes were discarded in favor of The Perl Way.</a></strong></dt>

<dt><strong><a name="corrected" class="item">BUG FIX
dbmultistats memory usage corrected (O(# tags), not O(1))</a></strong></dt>

<dt><strong><a name="o" class="item">ENHANCEMENT
dbmultistats can now optionally run with pre-grouped input in O(1) memory</a></strong></dt>

<dt><strong><a name="implemented" class="item">ENHANCEMENT
dbroweval -N was finally implemented (eat comments)</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="2_0__25_jan_08">2.0, 25-Jan-08</a></h2>
<p>2.0, 25-Jan-08 --- a quiet 2.0 release (gearing up towards complete)</p>
<dl>
<dt><strong><a name="dbstats" class="item">ENHANCEMENT:
shifting old programs to Perl modules, with
the front-end program as just a wrapper.
In the short-term, this change just means programs have real man pages.
In the long-run, it will mean that one can run a pipeline in a single
Perl program.
So far: 
<a href="#dbcol">dbcol</a>,
<a href="#dbroweval">dbroweval</a>,
the new <a href="#dbrowcount">dbrowcount</a>.
<a href="#dbsort">dbsort</a>
the new <em>dbmerge</em>,
the old <code>dbstats</code> (renamed <a href="#dbcolstats">dbcolstats</a>),
<a href="#dbcolrename">dbcolrename</a>,
<a href="#dbcolcreate">dbcolcreate</a>,</a></strong></dt>

<dt><strong><a name="perl" class="item">NEW:
<a href="/Fsdb/Filter/dbpipeline.html">the Fsdb::Filter::dbpipeline manpage</a> is an internal-only module that lets one
use fsdb commands from within perl (via threads).</a></strong></dt>

<dd>
<p>It also provides perl function aliases for the internal modules,
so a string of fsdb commands in perl are nearly as terse as in the
shell:</p>
<pre>
    use Fsdb::Filter::dbpipeline qw(:all);
    dbpipeline(
        dbrow(qw(name test1)),
        dbroweval('_test1 += 5;')
    );</pre>
</dd>
<dt><strong><a name="incompatible_change_the_old_dbcolstats_has_been_renamed_dbcolstatscores_the_new_dbcolstats_does_the_same_thing_as_the_old_dbstats_this_incompatibility_is_unfortunate_but_normalizes_program_names" class="item">INCOMPATIBLE CHANGE:
The old <a href="#dbcolstats">dbcolstats</a> has been renamed <a href="#dbcolstatscores">dbcolstatscores</a>.
The new <a href="#dbcolstats">dbcolstats</a> does the same thing as the old <a href="#dbstats">dbstats</a>.
This incompatibility is unfortunate but normalizes program names.</a></strong></dt>

<dt><strong><a name="compute" class="item">CHANGE:
The new <a href="#dbcolstats">dbcolstats</a> program
always outputs <code>-</code> (the default empty value) for
statistics it cannot compute (for example, standard deviation
if there is only one row),
instead of the old mix of <code>-</code> and &quot;na&quot;.</a></strong></dt>

<dt><strong><a name="incompatible_change_the_old_dbcolstats_program_now_called_dbcolstatscores_also_has_different_arguments_the_t_mean_stddev_option_is_now_tmean_mean_tstddev_stddev_see_dbcolstatscores_for_details" class="item">INCOMPATIBLE CHANGE:
The old <a href="#dbcolstats">dbcolstats</a> program, now called <a href="#dbcolstatscores">dbcolstatscores</a>,
also has different arguments.  The <code>-t mean,stddev</code> option is now
<code>--tmean mean --tstddev stddev</code>.  See <a href="#dbcolstatscores">dbcolstatscores</a> for details.</a></strong></dt>

<dt><strong><a name="incompatible_change_dbcolcreate_now_assumes_all_new_columns_get_the_default_value_rather_than_requiring_each_column_to_have_an_initial_constant_value_to_change_the_initial_value_sue_the_new_e_option" class="item">INCOMPATIBLE CHANGE:
<a href="#dbcolcreate">dbcolcreate</a> now assumes all new columns get the default 
value rather than requiring each column to have an initial constant value.
To change the initial value, sue the new <code>-e</code> option.</a></strong></dt>

<dt><strong><a name="output" class="item">NEW:
<a href="#dbrowcount">dbrowcount</a> counts rows, an almost-subset of <a href="#dbcolstats">dbcolstats</a>'s <code>n</code> output
(except without differentiating numeric/non-numeric input),
or the equivalent of <code>dbstripcomments | wc -l</code>.</a></strong></dt>

<dt><strong><a name="new_dbmerge_merges_two_sorted_files_this_functionality_was_previously_embedded_in_dbsort" class="item">NEW:
<em>dbmerge</em> merges two sorted files.
This functionality was previously embedded in <a href="#dbsort">dbsort</a>.</a></strong></dt>

<dt><strong><a name="incompatible_change_dbjoin_s_i_option_to_include_non_matches_is_now_renamed_a_so_as_to_not_conflict_with_the_new_standard_option_i_for_input_file" class="item">INCOMPATIBLE CHANGE:
<a href="#dbjoin">dbjoin</a>'s <code>-i</code> option to include non-matches
is now renamed <code>-a</code>, so as to not conflict with the new
standard option <code>-i</code> for input file.</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="2_1__6_apr_08">2.1,  6-Apr-08</a></h2>
<p>2.1,  6-Apr-08 --- another alpha 2.0, but now all converted programs understand both listize and colize format</p>
<dl>
<dt><strong><a name="enhancement_shifting_more_old_programs_to_perl_modules_new_in_2_1_dbcolneaten_dbcoldefine_dbcolhisto_dblistize_dbcolize_dbrecolize" class="item">ENHANCEMENT:
shifting more old programs to Perl modules.
New in 2.1:
<a href="#dbcolneaten">dbcolneaten</a>,
<a href="#dbcoldefine">dbcoldefine</a>,
<a href="#dbcolhisto">dbcolhisto</a>,
<em>dblistize</em>,
<em>dbcolize</em>,
<em>dbrecolize</em></a></strong></dt>

<dt><strong><a name="enhancement_dbmerge_now_handles_an_arbitrary_number_of_input_files_not_just_exactly_two" class="item">ENHANCEMENT
<em>dbmerge</em> now handles an arbitrary number of input files,
not just exactly two.</a></strong></dt>

<dt><strong><a name="new_dbmerge2_is_an_internal_routine_that_handles_merging_exactly_two_files" class="item">NEW
<em>dbmerge2</em> is an internal routine that handles merging exactly two files.</a></strong></dt>

<dt><strong>INCOMPATIBLE CHANGE
<a href="#dbjoin">dbjoin</a> now specifies inputs like <em>dbmerge2</em>,
rather than assuming the first two arguments were tables (as in fsdb-1).</strong></dt>

<dd>
<p>The old <a href="#dbjoin">dbjoin</a> argument <code>-i</code> is now <code>-a</code> or &lt;--type=outer&gt;.</p>
<p>A minor change: comments in the source files for
<a href="#dbjoin">dbjoin</a> are now intermixed with output
rather than being delayed until the end.</p>
</dd>
<dt><strong><a name="enhancement_dbsort_now_no_longer_produces_warnings_when_null_values_are_passed_to_numeric_comparisons" class="item">ENHANCEMENT
<a href="#dbsort">dbsort</a> now no longer produces warnings when null values are 
passed to numeric comparisons.</a></strong></dt>

<dt><strong><a name="bug_fix_dbroweval_now_once_again_works_with_code_that_lacks_a_trailing_semicolon_this_bug_fixes_a_regression_from_1_15" class="item">BUG FIX
<a href="#dbroweval">dbroweval</a> now once again works with code that lacks a trailing semicolon.
(This bug fixes a regression from 1.15.)</a></strong></dt>

<dt><strong><a name="option" class="item">INCOMPATIBLE CHANGE
<a href="#dbcolneaten">dbcolneaten</a>'s old <code>-e</code> option (to avoid end-of-line spaces) is now <code>-E</code>
to avoid conflicts with the standard empty field argument.</a></strong></dt>

<dt><strong><a name="incompatible_change_dbcolhisto_s_old_e_option_is_now_e_to_avoid_conflicts_and_its_n_s_and_w_are_now_n_s_and_w_to_correspond" class="item">INCOMPATIBLE CHANGE
<a href="#dbcolhisto">dbcolhisto</a>'s old <code>-e</code> option is now <code>-E</code> to avoid conflicts.
And its <code>-n</code>, <code>-s</code>, and <code>-w</code> are now
<code>-N</code>, <code>-S</code>, and <code>-W</code> to correspond.</a></strong></dt>

<dt><strong><a name="new_dbfilealter_replaces_dbrecolize_dblistize_and_dbcolize_but_with_different_options" class="item">NEW
<a href="#dbfilealter">dbfilealter</a> replaces <em>dbrecolize</em>, <em>dblistize</em>, and <em>dbcolize</em>,
but with different options.</a></strong></dt>

<dt><strong><a name="enhancement_the_library_routines_fsdb_io_now_understand_both_list_format_and_column_format_data_so_all_converted_programs_can_now_automatically_read_either_format_this_capability_was_one_of_the_milestone_goals_for_2_0_so_yea" class="item">ENHANCEMENT
The library routines <code>Fsdb::IO</code> now understand both list-format
and column-format data, so all converted programs can now
<em>automatically</em> read either format.  This capability was one
of the milestone goals for 2.0, so yea!</a></strong></dt>

</dl>
<p>
</p>
<h2><a name="2_2__23_may_08">2.2, 23-May-08</a></h2>
<p>Release 2.2 is another 2.x alpha release.  Now <em>most</em> of the
commands are ported, but a few remain, and I plan one last
incompatible change (to the file header) before 2.x final.</p>
<dl>
<dt><strong><a name="enhancement" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p>shifting more old programs to Perl modules.
New in 2.2:
<a href="#dbrowaccumulate">dbrowaccumulate</a>,
<a href="#dbformmail">dbformmail</a>.
<a href="#dbcolmovingstats">dbcolmovingstats</a>.
<a href="#dbrowuniq">dbrowuniq</a>.
<a href="#dbrowdiff">dbrowdiff</a>.
<a href="#dbcolmerge">dbcolmerge</a>.
<a href="#dbcolsplittocols">dbcolsplittocols</a>.
<a href="#dbcolsplittorows">dbcolsplittorows</a>.
<a href="#dbmapreduce">dbmapreduce</a>.
<a href="#dbmultistats">dbmultistats</a>.
<a href="#dbrvstatdiff">dbrvstatdiff</a>.
Also
<a href="#dbrowenumerate">dbrowenumerate</a> 
exists only as a front-end (command-line) program.</p>
</dd>
<dt><strong><a name="incompatible_change" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p>The following programs have been dropped from fsdb-2.x:
<em>dbcoltighten</em>,
<em>dbfilesplit</em>,
<em>dbstripextraheaders</em>,
<em>dbstripleadingspace</em>.</p>
</dd>
<dt><strong><a name="new2" class="item">NEW</a></strong></dt>

<dd>
<p><a href="#combined_log_format_to_db">combined_log_format_to_db</a> to convert Apache logfiles</p>
</dd>
<dt><strong><a name="incompatible_change2" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p>Options to <a href="#dbrowdiff">dbrowdiff</a> are now <strong>-B</strong> and <strong>-I</strong>,
not <strong>-a</strong> and <strong>-i</strong>.</p>
</dd>
<dt><strong><a name="incompatible_change3" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p><em>dbstripcomments</em> is now <a href="#dbfilestripcomments">dbfilestripcomments</a>.</p>
</dd>
<dt><strong><a name="bug_fixes" class="item">BUG FIXES</a></strong></dt>

<dd>
<p><a href="#dbcolneaten">dbcolneaten</a> better handles empty columns;
<a href="#dbcolhisto">dbcolhisto</a> warning suppressed (actually a bug in high-bucket handling).</p>
</dd>
<dt><strong><a name="incompatible_change4" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p><a href="#dbmultistats">dbmultistats</a> now requires a <code>-k</code> option in front of the 
key (tag) field, or if none is given, it will group by the first field
(both like <a href="#dbmapreduce">dbmapreduce</a>).</p>
</dd>
<dt><strong><a name="known_bug" class="item">KNOWN BUG</a></strong></dt>

<dd>
<p><a href="#dbmultistats">dbmultistats</a> with quantile option doesn't work currently.</p>
</dd>
<dt><strong><a name="incompatible_change5" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p><em>dbcoldiff</em> is renamed <a href="#dbrvstatdiff">dbrvstatdiff</a>.</p>
</dd>
<dt><strong><a name="bug_fixes2" class="item">BUG FIXES</a></strong></dt>

<dd>
<p><a href="#dbformmail">dbformmail</a> was leaving its log message as a  command, not a comment.
Oops.  No longer.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_3__27_may_08__alpha_">2.3, 27-May-08 (alpha)</a></h2>
<p>Another alpha release, this one just to fix the critical dbjoin bug
listed below (that happens to have blocked my MP3 jukebox :-).</p>
<dl>
<dt><strong><a name="bug_fix" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Dbsort no longer hangs if given an input file with no rows.</p>
</dd>
<dt><strong><a name="bug_fix2" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Dbjoin now works with unsorted input coming from a pipeline (like stdin).
Perl-5.8.8 has a bug (?) that was making this case fail---opening
stdin in one thread, reading some, then reading more in a different
thread caused an lseek which works on files, but fails on pipes like stdin.
Go figure.</p>
</dd>
<dt><strong><a name="bug_fix_known_bug" class="item">BUG FIX / KNOWN BUG</a></strong></dt>

<dd>
<p>The dbjoin fix also fixed dbmultistats -q
(it now gives the right answer).
Although a new bug appeared, messages like:
    Attempt to free unreferenced scalar: SV 0xa9dd0c4, Perl interpreter: 0xa8350b8 during global destruction.
So the dbmultistats_quartile test is still disabled.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_4__18_jun_08">2.4, 18-Jun-08</a></h2>
<p>Another alpha release, mostly to fix minor usability
problems in dbmapreduce and client functions.</p>
<dl>
<dt><strong><a name="enhancement2" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbrow">dbrow</a> now defaults to running user supplied code without warnings
(as with fsdb-1.x).
Use <code>--warnings</code> or <code>-w</code> to turn them back on.</p>
</dd>
<dt><strong><a name="enhancement3" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbroweval">dbroweval</a> can now write different format output
than the input, using the <code>-m</code> option.</p>
</dd>
<dt><strong><a name="known_bug2" class="item">KNOWN BUG</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> emits warnings on perl 5.10.0
about &quot;Unbalanced string table refcount&quot; and &quot;Scalars leaked&quot;
when run with an external program as a reducer.</p>
<p><a href="#dbmultistats">dbmultistats</a> emits the warning &quot;Attempt to free unreferenced scalar&quot;
when run with quartiles.</p>
<p>In each case the output is correct.
I believe these can be ignored.</p>
</dd>
<dt><strong><a name="change" class="item">CHANGE</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> no longer logs a line for each reducer that is invoked.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_5__24_jun_08">2.5, 24-Jun-08</a></h2>
<p>Another alpha release, fixing more minor bugs in 
<a href="#dbmapreduce"><code>dbmapreduce</code></a> and lossage in <code>Fsdb::IO</code>.</p>
<dl>
<dt><strong><a name="enhancement4" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> can now tolerate non-map-aware reducers
that pass back the key column in put.
It also passes the current key as the last argument to 
external reducers.</p>
</dd>
<dt><strong><a name="bug_fix3" class="item">BUG FIX</a></strong></dt>

<dd>
<p><a href="/Fsdb/IO/Reader.html">the Fsdb::IO::Reader manpage</a>, correctly handle <code>-header</code> option again.
(Broken since fsdb-2.3.)</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_6__11_jul_08">2.6, 11-Jul-08</a></h2>
<p>Another alpha release, needed to fix DaGronk.
One new port, small bug fixes, and important fix to <a href="#dbmapreduce">dbmapreduce</a>.</p>
<dl>
<dt><strong><a name="enhancement5" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p>shifting more old programs to Perl modules.
New in 2.2:
<a href="#dbcolpercentile">dbcolpercentile</a>.</p>
</dd>
<dt><strong><a name="incompatible_change_and_enhancements_dbcolpercentile_arguments_changed_use_rank_to_require_ranking_instead_of_r_also_ascending_and_descending_can_now_be_specified_separately_both_for_percentile_and_rank" class="item">INCOMPATIBLE CHANGE and ENHANCEMENTS
<a href="#dbcolpercentile">dbcolpercentile</a> arguments changed,
use <code>--rank</code> to require ranking instead of <code>-r</code>.
Also, <code>--ascending</code> and <code>--descending</code> can now be specified separately,
both for <code>--percentile</code> and <code>--rank</code>.</a></strong></dt>

<dt><strong><a name="bug_fix4" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Sigh, the sense of the --warnings option in <a href="#dbrow">dbrow</a> was inverted.  No longer.</p>
</dd>
<dt><strong><a name="bug_fix5" class="item">BUG FIX</a></strong></dt>

<dd>
<p>I found and fixed the string leaks (errors like &quot;Unbalanced string
table refcount&quot; and &quot;Scalars leaked&quot;) in <a href="#dbmapreduce">dbmapreduce</a> and <a href="#dbmultistats">dbmultistats</a>.
(All <code>IO::Handle</code>s in threads must be manually destroyed.)</p>
</dd>
<dt><strong><a name="bug_fix6" class="item">BUG FIX</a></strong></dt>

<dd>
<p>The <code>-C</code> option to specify the column separator in <a href="#dbcolsplittorows">dbcolsplittorows</a> 
now works again (broken since it was ported).</p>
</dd>
</dl>
<p>2.7, 30-Jul-08 beta</p>
<p>The beta release of fsdb-2.x.  Finally, all programs are ported.
As statistics, the number of lines of non-library code doubled from
7.5k to 15.5k.  The libraries are much more complete,
going from 866 to 5164 lines.
The overall number of programs is about the same, 
although 19 were dropped and 11 were added.  
The number of test cases has grown from 116 to 175.
All programs are now in perl-5, no more shell scripts or perl-4.
All programs now have manual pages.</p>
<p>Although this is a major step forward, I still expect
to rename &quot;fsdb&quot; to &quot;fsdb&quot;.</p>
<dl>
<dt><strong><a name="enhancement6" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p>shifting more old programs to Perl modules.
New in 2.7:
<em>dbcolscorellate</em>.
<a href="#dbcolsregression">dbcolsregression</a>.
<a href="#cgi_to_db">cgi_to_db</a>.
<a href="#dbfilevalidate">dbfilevalidate</a>.
<a href="#db_to_csv">db_to_csv</a>.
<em>csv_to_db</em>,
<a href="#db_to_html_table">db_to_html_table</a>,
<a href="#kitrace_to_db">kitrace_to_db</a>,
<a href="#tcpdump_to_db">tcpdump_to_db</a>,
<a href="#tabdelim_to_db">tabdelim_to_db</a>,
<a href="#ns_to_db">ns_to_db</a>.</p>
</dd>
<dt><strong><a name="incompatible_change6" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p>The following programs have been dropped from fsdb-2.x:
<em>db2dcliff</em>,
<em>dbcolmultiscale</em>,
<em>crl_to_db</em>.
<em>ipchain_logs_to_db</em>.
They may come back, but seemed overly specialized.
The following program 
<em>dbrowsplituniq</em>
was dropped because it is superseded by <a href="#dbmapreduce">dbmapreduce</a>.
<em>dmalloc_to_db</em>
was dropped pending a test cases and examples.</p>
</dd>
<dt><strong><a name="enhancement7" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbfilevalidate">dbfilevalidate</a> now has a <code>-c</code> option to correct errors.</p>
</dd>
<dt><strong><a name="new3" class="item">NEW</a></strong></dt>

<dd>
<p><a href="#html_table_to_db">html_table_to_db</a> provides the inverse of
<a href="#db_to_html_table">db_to_html_table</a>.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_8__5_aug_08">2.8,  5-Aug-08</a></h2>
<p>Change header format, preserving forwards compatibility.</p>
<dl>
<dt><strong><a name="bug_fix7" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Complete editing pass over the manual, making sure it aligns 
with fsdb-2.x.</p>
</dd>
<dt><strong><a name="semi_compatible_change" class="item">SEMI-COMPATIBLE CHANGE</a></strong></dt>

<dd>
<p>The header of fsdb files has changed, it is now #fsdb, not #h (or #L)
and parsing of -F and -R are also different.
See <a href="#dbfilealter">dbfilealter</a> for the new specification.
The v1 file format will be read, compatibly, but
not written.</p>
</dd>
<dt><strong><a name="bug_fix8" class="item">BUG FIX</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> now tolerates comments that preceed the first key,
instead of failing with an error message.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_9__6_aug_08">2.9, 6-Aug-08</a></h2>
<p>Still in beta; just a quick bug-fix for <a href="#dbmapreduce">dbmapreduce</a>.</p>
<dl>
<dt><strong><a name="enhancement8" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> now generates plausible output when given no rows
of input.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_10__23_sep_08">2.10, 23-Sep-08</a></h2>
<p>Still in beta, but picking up some bug fixes.</p>
<dl>
<dt><strong><a name="enhancement9" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbmapreduce">dbmapreduce</a> now generates plausible output when given no rows
of input.</p>
</dd>
<dt><strong><a name="enhancement10" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbroweval">dbroweval</a> the warnings option was backwards;
now corrected.  As a result, warnings in user code now default off
(like in fsdb-1.x).</p>
</dd>
<dt><strong><a name="bug_fix9" class="item">BUG FIX</a></strong></dt>

<dd>
<p><a href="#dbcolpercentile">dbcolpercentile</a> now defaults to assuming the target column is numeric.
The new option <code>-N</code> allows selectin of a non-numeric target.</p>
</dd>
<dt><strong><a name="bug_fix10" class="item">BUG FIX</a></strong></dt>

<dd>
<p><a href="#dbcolscorrelate">dbcolscorrelate</a> now includes <code>--sample</code> and <code>--nosample</code> options
to compute the sample or full population correlation coefficients.
Thanks to Xue Cai for finding this bug.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_11__14_oct_08">2.11, 14-Oct-08</a></h2>
<p>Still in beta, but picking up some bug fixes.</p>
<dl>
<dt><strong><a name="enhancement11" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#html_table_to_db">html_table_to_db</a> is now more agressive about filling in empty cells
with the official empty value, rather than leaving them blank or as whitespace.</p>
</dd>
<dt><strong><a name="enhancement12" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><em>dbpipeline</em> now catches failures during pipeline element setup
and exits reasonably gracefully.</p>
</dd>
<dt><strong><a name="bug_fix11" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em>dbsubprocess</em> now reaps child prcoesses, thus avoiding
running out of processes when used a lot.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_12__16_oct_08">2.12, 16-Oct-08</a></h2>
<p>Finally, a full (non-beta) 2.x release!</p>
<dl>
<dt><strong><a name="incompatible_change7" class="item">INCOMPATIBLE CHANGE</a></strong></dt>

<dd>
<p>Jdb has been renamed Fsdb, the flatfile-streaming database.
This change affects all internal Perl APIs,
but no shell command-level APIs.
While Jdb served well for more than ten years,
it is easily confused with the Java debugger (even though Jdb was there first!).
It also is too generic to work well in web search engines.
Finally, Jdb stands for ``John's database'', and we're a bit beyond that.
(However, some call me the ``file-system guy'', so 
one could argue it retains that meeting.)</p>
<p>If you just used the shell commands, this change should not affect you.
If you used the Perl-level libraries directly in your code,
you should be able to rename &quot;Jdb&quot; to &quot;Fsdb&quot; to move to 2.12.</p>
<p>The jdb-announce list not yet been renamed, but it will be shortly.</p>
<p>With this release I've accomplished everything I wanted to
in fsdb-2.x.  I therefore expect to return to boring, bugfix releases.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_13__30_oct_08">2.13, 30-Oct-08</a></h2>
<dl>
<dt><strong><a name="bug_fix12" class="item">BUG FIX</a></strong></dt>

<dd>
<p><a href="#dbrowaccumulate">dbrowaccumulate</a> now treats non-numeric data as zero by default.</p>
</dd>
<dt><strong><a name="bug_fix13" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Fixed a perl-5.10ism in <a href="#dbmapreduce">dbmapreduce</a> that
breaks that program under 5.8. 
Thanks to Martin Lukac for reporting the bug.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_14__26_nov_08">2.14, 26-Nov-08</a></h2>
<dl>
<dt><strong><a name="bug_fix14" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Improved documentation for <a href="#dbmapreduce">dbmapreduce</a>'s <a href="#f"><code>-f</code></a> option.</p>
</dd>
<dt><strong><a name="enhancement13" class="item">ENHANCEMENT</a></strong></dt>

<dd>
<p><a href="#dbcolmovingstats">dbcolmovingstats</a> how computes a moving standard deviation in addition
to a moving mean.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_15__13_apr_09">2.15, 13-Apr-09</a></h2>
<dl>
<dt><strong><a name="bug_fix15" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Fix a <em class="file">make install</em> bug reported by Shalindra Fernando.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_16__14_apr_09">2.16, 14-Apr-09</a></h2>
<dl>
<dt><strong><a name="bug_fix16" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Another minor release bug: on some systems <em class="file">programize_module</em> looses
executable permissions.  Again reported by Shalindra Fernando.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_17__25_jun_09">2.17, 25-Jun-09</a></h2>
<dl>
<dt><strong><a name="typo_fixes" class="item">TYPO FIXES</a></strong></dt>

<dd>
<p>Typo in the <em class="file">dbroweval</em> manual fixed.</p>
</dd>
<dt><strong><a name="improvement2" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>There is no longer a comment line to label columns
in <em class="file">dbcolneaten</em>, instead the header line is tweaked to
line up.  This change restores the Jdb-1.x behavior, and
means that repeated runs of dbcolneaten no longer add comment lines
each time.</p>
</dd>
<dt><strong><a name="bug_fix17" class="item">BUG FIX</a></strong></dt>

<dd>
<p>It turns out  <em class="file">dbcolneaten</em> was not correctly handling trailing spaces
when given the <code>-E</code> option to suppress them.  This regression is now
fixed.</p>
</dd>
<dt><strong><a name="extension" class="item">EXTENSION</a></strong></dt>

<dd>
<p><a href="#dbroweval">dbroweval(1)</a> can now handle direct references to the last row
via <em class="file">$lfref</em>, a dubious but now documented feature.</p>
</dd>
<dt><strong><a name="bug_fixes3" class="item">BUG FIXES</a></strong></dt>

<dd>
<p>Separators set with <code>-C</code> in <em class="file">dbcolmerge</em> and <em class="file">dbcolsplittocols</em>
were not properly
setting the heading, and null fields were not recognized.
The first bug was reported by Martin Lukac.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_18__1_jul_09_a_minor_release">2.18,  1-Jul-09  A minor release</a></h2>
<dl>
<dt><strong><a name="improvement3" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Documentation for <em class="file">Fsdb::IO::Reader</em> has been improved.</p>
</dd>
<dt><strong><a name="improvement4" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>The package should now be PGP-signed.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_19__10_jul_09">2.19,  10-Jul-09</a></h2>
<dl>
<dt><strong><a name="bug_fix18" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Internal improvements to debugging output and robustness of
<em class="file">dbmapreduce</em> and <em class="file">dbpipeline</em>. 
<em class="file">TEST/dbpipeline_first_fails.cmd</em> re-enabled.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_20__30_nov_09__a_collection_of_minor_bugfixes__plus_a_build_against_fedora_12__">2.20, 30-Nov-09
(A collection of minor bugfixes, plus a build against Fedora 12.)</a></h2>
<dl>
<dt><strong><a name="bug_fix19" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Loging for 
<em class="file">dbmapreduce</em>
with code refs is now stable
(it no longer includes a hex pointer to the code reference).</p>
</dd>
<dt><strong><a name="bug_fix20" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Better handling of mixed blank lines in <em class="file">Fsdb::IO::Reader</em>
(see test case <em class="file">dbcolize_blank_lines.cmd</em>).</p>
</dd>
<dt><strong><a name="bug_fix21" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">html_table_to_db</em> now handles multi-line input better,
and handles tables with COLSPAN.</p>
</dd>
<dt><strong><a name="bug_fix22" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbpipeline</em> now cleans up threads in an <code>eval</code>
to prevent &quot;cannot detach a joined thread&quot; errors that popped
up in perl-5.10.  Hopefully this prevents a race condition
that causes the test suites to hang about 20% of the time
(in <em class="file">dbpipeline_first_fails</em>).</p>
</dd>
<dt><strong><a name="improvement5" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">dbmapreduce</em> now detects and correctly fails
when the input and reducer have incompatible 
field seperators.</p>
</dd>
<dt><strong><a name="improvement6" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">dbcolstats</em>, <em class="file">dbcolhisto</em>, <em class="file">dbcolscorrelate</em>, <em class="file">dbcolsregression</em>,
and <em class="file">dbrowcount</em>
now all take an <code>-F</code> option to let one specify the output field seperator
(so they work better with <em class="file">dbmapreduce</em>).</p>
</dd>
<dt><strong><a name="bug_fix23" class="item">BUG FIX</a></strong></dt>

<dd>
<p>An omitted <code>-k</code> from the manual page of <em class="file">dbmultistats</em>
is now there.  Bug reported by Unkyu Park.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_21__17_apr_10_bug_fix_release">2.21, 17-Apr-10
bug fix release</a></h2>
<dl>
<dt><strong><a name="bug_fix24" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">Fsdb::IO::Writer</em> now no longer fails with -outputheader =&gt; never
(an obscure bug).</p>
</dd>
<dt><strong><a name="improvement7" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">Fsdb</em> (in the warnings section)
and <em class="file">dbcolstats</em> now more carefully document how they
handle (and do not handle) numerical precision problems,
and other general limits.  Thanks to Yuri Pradkin for prompting
this documentation.</p>
</dd>
<dt><strong><a name="improvement8" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><code>Fsdb::Support::fullname_to_sortkey</code>
is now restored from <code>Jdb</code>.</p>
</dd>
<dt><strong><a name="improvement9" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Documention for multiple styles of input approaches
(including performance description) added to <a href="/Fsdb/IO.html">the Fsdb::IO manpage</a>.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_22__2010_10_31_one_new_tool_dbcolcopylast_and_several_bug_fixes_for_perl_5_10_">2.22, 2010-10-31
One new tool <em class="file">dbcolcopylast</em> and several bug fixes for Perl 5.10.</a></h2>
<dl>
<dt><strong><a name="bug_fix25" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbmerge</em> now correctly handles n-way merges.
Bug reported by Yuri Pradkin.</p>
</dd>
<dt><strong><a name="incompatable_change" class="item">INCOMPATABLE CHANGE</a></strong></dt>

<dd>
<p><em class="file">dbcolneaten</em> now defaults to <em>not</em> padding the last column.</p>
</dd>
<dt><strong><a name="addition" class="item">ADDITION</a></strong></dt>

<dd>
<p><em class="file">dbrowenumerate</em> now takes <strong>-N NewColumn</strong> to give the new
column a name other than &quot;count&quot;.  Feature reuested by Mike Rouch
in January 2005.</p>
</dd>
<dt><strong><a name="addition2" class="item">ADDITION</a></strong></dt>

<dd>
<p>New program <em class="file">dbcolcopylast</em> copies the last value of a column
into a new column copylast_column of the next row.
New program requested by Fabio Silva;
useful for convereting dbmultistats output into dbrvstatdiff input.</p>
</dd>
<dt><strong><a name="bug_fix26" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Several tools (particularly <em class="file">dbmapreduce</em> and <em class="file">dbmultistats</em>) would
report errors like &quot;Unbalanced string table refcount: (1) for &quot;STDOUT&quot;
during global destruction&quot; on exit, at least on certain versions
of Perl (for me on 5.10.1), but similar errors have been off-and-on
for several Perl releases.  Although I think my code looked
OK, I worked around this problem with a different way of handling
standard IO redirection.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_23__2011_03_10_several_small_portability_bugfixes__improved_dbcolstats_for_large_datsets">2.23, 2011-03-10
Several small portability bugfixes; improved <em class="file">dbcolstats</em> for large datsets</a></h2>
<dl>
<dt><strong><a name="improvement10" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Documentation to <em class="file">dbrvstatdiff</em> was changed to use &quot;sd&quot; to refer to
standard deviation, not &quot;ss&quot; (which might be confused with sum-of-squares).</p>
</dd>
<dt><strong><a name="bug_fix27" class="item">BUG FIX</a></strong></dt>

<dd>
<p>This documentation about <em class="file">dbmultistats</em> was missing the <em class="file">-k</em> option
in some cases.</p>
</dd>
<dt><strong><a name="bug_fix28" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbmapreduce</em> was failing on MacOS-10.6.3 for some tests with
the error</p>
<pre>
    dbmapreduce: cannot run external dbmapreduce reduce program (perl TEST/dbmapreduce_external_with_key.pl)</pre>
<p>The problem seemed to be only in the error, not in operation.
On MacOS, the error is now suppressed.
Thanks to Alefiya Hussain for providing access to a Mac system
that allowed debugging of this problem.</p>
</dd>
<dt><strong><a name="improvement11" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>The <em class="file">csv_to_db</em> command requires an external
Perl library (<em class="file">Text::CSV_XS</em>).  On computers that
lack this optional library, previously Fsdb would configure
with a warning and then test cases would fail.
Now those test cases are skipped with an additional warning.</p>
</dd>
<dt><strong><a name="bug_fix29" class="item">BUG FIX</a></strong></dt>

<dd>
<p>The test suite now supports alternative valid output, as a hack
to account for last-digit floating point differences.
(Not very satisfying :-(</p>
</dd>
<dt><strong><a name="bug_fix30" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbcolstats</em> output for confidence intervals on very large
datasets has changed.  Previously it failed for more than 2^31-1
records, and handling of T-Distributions with thousands of rows
was a bit dubious.  Now datasets with more than 10000 are considered
infinitely large and hopefully correctly handled.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_24__2011_04_15_improvements_to_fix_an_old_bug_in_dbmapreduce_with_different_field_separators">2.24, 2011-04-15
Improvements to fix an old bug in dbmapreduce with different field separators</a></h2>
<dl>
<dt><strong><a name="improvement12" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>The <em class="file">dbfilealter</em> command had a <code>--correct</code> option to
work-around from incompatible field-seperators,
but it did nothing.  Now it does the correct but sad, data-loosing
thing.</p>
</dd>
<dt><strong><a name="improvement13" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>The <em class="file">dbmultistats</em> command
previously failed with an error message when invoked
on input with a non-default field separator.
The root cause was the underlying <em class="file">dbmapreduce</em>
that did not handle the case of reducers that generated
output with a different field separator than the input.
We now detect and repair incompatible field separators.
This change corrects a problem originally documented and detected
in Fsdb-2.20.
Bug re-reported by Unkyu Park.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_25__2011_08_07_two_new_tools__xml_to_db_and_dbfilepivot__and_a_bugfix_for_two_people_">2.25, 2011-08-07
Two new tools, <em class="file">xml_to_db</em> and <em class="file">dbfilepivot</em>, and a bugfix for two people.</a></h2>
<dl>
<dt><strong><a name="improvement14" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">kitrace_to_db</em> now supports a <em class="file">--utc</em> option, 
which also fixes this test case for users outside of the Pacific
time zone.  Bug reported by David Graff, and also by Peter Desnoyers
(within a week of each other :-)</p>
</dd>
<dt><strong><a name="new4" class="item">NEW</a></strong></dt>

<dd>
<p><em class="file">xml_to_db</em> can convert simple, very regular XML files into Fsdb.</p>
</dd>
<dt><strong><a name="new5" class="item">NEW</a></strong></dt>

<dd>
<p><em class="file">dbfilepivot</em> &quot;pivots&quot; a file, converting multiple rows
correponding to the same entity into a single row with multiple columns.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_26__2011_12_12_bug_fixes__particularly_for_perl_5_14_2_">2.26, 2011-12-12
Bug fixes, particularly for perl-5.14.2.</a></h2>
<dl>
<dt><strong><a name="bug_fix31" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Bugs fixed in <a href="/Fsdb/IO/Reader(3).html">the Fsdb::IO::Reader(3) manpage</a> manual page.</p>
</dd>
<dt><strong><a name="bug_fix32" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Fixed problems where <a href="#dbcolstats">dbcolstats</a> was truncating floating point numbers
when sorting.  This strange behavior happenes as of perl-5.14.2 and
it <em>seems</em> like a Perl bug.  I've worked around it for the test suites,
but I'm a bit nervous.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_27__2012_11_15_accumulated_bug_fixes_">2.27, 2012-11-15
Accumulated bug fixes.</a></h2>
<dl>
<dt><strong><a name="improvement15" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">csv_to_db</em> now reports errors in CVS input with real diagnostics.</p>
</dd>
<dt><strong><a name="improvement16" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p><em class="file">dbcolmovingstats</em> can now compute median, when given the <code>-m</code> option.</p>
</dd>
<dt><strong><a name="bug_fix33" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbcolmovingstats</em> non-numeric handling (the <code>-a</code> option) now works properly.</p>
</dd>
<dt><strong><a name="documentation" class="item">DOCUMENTATION</a></strong></dt>

<dd>
<p>The internal
<em class="file">t/test_command.t</em> test framework
is now documented.</p>
</dd>
<dt><strong><a name="bug_fix34" class="item">BUG FIX</a></strong></dt>

<dd>
<p><em class="file">dbrowuniq</em> now corretly handles the case where there is no input
(previously it output a blank line, which is a malformed fsdb file).
Thanks to Yuri Pradkin for reporting this bug.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_28__2012_11_15_a_quick_release_to_fix_most_rpmlint_errors_">2.28, 2012-11-15
A quick release to fix most rpmlint errors.</a></h2>
<dl>
<dt><strong><a name="bug_fix35" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Fixed a number of minor release problems (wrong permissions, old FSF
address, etc.) found by rpmlint.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_29__2012_11_20_a_quick_release_for_cpan_testing">2.29, 2012-11-20
a quick release for CPAN testing</a></h2>
<dl>
<dt><strong><a name="improvement17" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Tweaked the RPM spec.</p>
</dd>
<dt><strong><a name="improvement18" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Modified <em class="file">Makefile.PL</em> to fail gracefully on Perl installations
that lack threads.  (Without this fix, I get massive failures
in the non-ithreads test system.)</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_30__2012_11_25_imporovements_to_perl_portability">2.30, 2012-11-25
imporovements to perl portability</a></h2>
<dl>
<dt><strong><a name="bug_fix36" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Removed unicode character in documention of <em class="file">dbcolscorrelated</em>
so pod tests will pass.  (Sigh, that should work :-( )</p>
</dd>
<dt><strong><a name="bug_fix37" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Fixed test suite failures on 5 tests (<em class="file">dbcolcreate_double_creation</em>
was the first) due to <em>Carp</em>'s addition of a period.
This problem was breaking Fsdb on perl-5.17.
Thanks to Michael McQuaid for helping diagnose this problem.</p>
</dd>
<dt><strong><a name="improvement19" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>The test suite now prints out the names of tests it tries.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="2_31__2012_11_28_a_release_with_actual_improvements_to_dbfilepivot_and_dbrowuniq_">2.31, 2012-11-28
A release with actual improvements to dbfilepivot and dbrowuniq.</a></h2>
<dl>
<dt><strong><a name="bug_fix38" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Documentation fixes: typos in <em>dbcolscorrelated</em>,
bugs in <a href="#dbfilepivot">dbfilepivot</a>,
clarification for comment handling in <a href="/Fsdb/IO/Reader.html">the Fsdb::IO::Reader manpage</a>.</p>
</dd>
<dt><strong><a name="improvement20" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Previously <a href="#dbfilepivot">dbfilepivot</a> assumed the input was grouped by keys
and didn't very that pre-condition.
Now there is no pre-condition (it will sort the input by default),
and it checks if the invariant is violated.</p>
</dd>
<dt><strong><a name="bug_fix39" class="item">BUG FIX</a></strong></dt>

<dd>
<p>Previously <a href="#dbfilepivot">dbfilepivot</a> failed if the input had comments (oops :-);
no longer.</p>
</dd>
<dt><strong><a name="improvement21" class="item">IMPROVEMENT</a></strong></dt>

<dd>
<p>Now <a href="#dbrowuniq">dbrowuniq</a> has the <code>-L</code> option to preserve the last
unique row (instead of the first), a common idiom.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>John Heidemann, <code>johnh@isi.edu</code></p>
<p>See <a href="#contributors">Contributors</a> for the many people who have contributed
bug reports and fixes.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Fsdb is Copyright (C) 1991-2012 by John Heidemann &lt;<a href="mailto:johnh@isi.edu">johnh@isi.edu</a>&gt;.</p>
<p>This program is free software; you can redistribute it and/or modify
it under the terms of version 2 of the GNU General Public License as
published by the Free Software Foundation.</p>
<p>This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
<p>A copy of the GNU General Public License can be found in the file
``COPYING''.</p>
<p>
</p>
<hr />
<h1><a name="comments_and_bug_reports">COMMENTS and BUG REPORTS</a></h1>
<p>Any comments about these programs should be sent to John Heidemann
<code>johnh@isi.edu</code>.</p>

</body>

</html>
